(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{4227:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>s9});var t=s(95155),r=s(12115),l=s(30285),n=s(68603),d=s(10469),i=s(77501),c=s(94063),A=s(37648),o=s(31550),p=s(25299),m=s(57082),u=s(50286),x=s(54683),B=s(91324),h=s(33349),b=s(18046),j=s(66695),E=s(3401),g=s(94754),Q=s(96025),f=s(16238),v=s(94517),N=s(24026),I=s(83394),y=s(83540),H=s(59434);let _={light:"",dark:".dark"},w=r.createContext(null);function k(){let e=r.useContext(w);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let C=r.forwardRef((e,a)=>{let{id:s,className:l,children:n,config:d,...i}=e,c=r.useId(),A="chart-".concat(s||c.replace(/:/g,""));return(0,t.jsx)(w.Provider,{value:{config:d},children:(0,t.jsxs)("div",{"data-chart":A,ref:a,className:(0,H.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...i,children:[(0,t.jsx)(D,{id:A,config:d}),(0,t.jsx)(y.u,{children:n})]})})});C.displayName="Chart";let D=e=>{let{id:a,config:s}=e,r=Object.entries(s).filter(e=>{let[,a]=e;return a.theme||a.color});return r.length?(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(_).map(e=>{let[s,t]=e;return"\n".concat(t," [data-chart=").concat(a,"] {\n").concat(r.map(e=>{var a;let[t,r]=e,l=(null==(a=r.theme)?void 0:a[s])||r.color;return l?"  --color-".concat(t,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};v.m;let F=r.forwardRef((e,a)=>{let{active:s,payload:l,className:n,indicator:d="dot",hideLabel:i=!1,hideIndicator:c=!1,label:A,labelFormatter:o,labelClassName:p,formatter:m,color:u,nameKey:x,labelKey:B}=e,{config:h}=k(),b=r.useMemo(()=>{var e;if(i||!(null==l?void 0:l.length))return null;let[a]=l,s="".concat(B||a.dataKey||a.name||"value"),r=M(h,a,s),n=B||"string"!=typeof A?null==r?void 0:r.label:(null==(e=h[A])?void 0:e.label)||A;return o?(0,t.jsx)("div",{className:(0,H.cn)("font-medium",p),children:o(n,l)}):n?(0,t.jsx)("div",{className:(0,H.cn)("font-medium",p),children:n}):null},[A,o,l,i,p,h,B]);if(!s||!(null==l?void 0:l.length))return null;let j=1===l.length&&"dot"!==d;return(0,t.jsxs)("div",{ref:a,className:(0,H.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,t.jsx)("div",{className:"grid gap-1.5",children:l.map((e,a)=>{let s="".concat(x||e.name||e.dataKey||"value"),r=M(h,e,s),l=u||e.payload.fill||e.color;return(0,t.jsx)("div",{className:(0,H.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===d&&"items-center"),children:m&&(null==e?void 0:e.value)!==void 0&&e.name?m(e.value,e.name,e,a,e.payload):(0,t.jsxs)(t.Fragment,{children:[(null==r?void 0:r.icon)?(0,t.jsx)(r.icon,{}):!c&&(0,t.jsx)("div",{className:(0,H.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===d,"w-1":"line"===d,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===d,"my-0.5":j&&"dashed"===d}),style:{"--color-bg":l,"--color-border":l}}),(0,t.jsxs)("div",{className:(0,H.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,t.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,t.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,t.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function M(e,a,s){if("object"!=typeof a||null===a)return;let t="payload"in a&&"object"==typeof a.payload&&null!==a.payload?a.payload:void 0,r=s;return s in a&&"string"==typeof a[s]?r=a[s]:t&&s in t&&"string"==typeof t[s]&&(r=t[s]),r in e?e[r]:e[s]}F.displayName="ChartTooltip",N.s,r.forwardRef((e,a)=>{let{className:s,hideIcon:r=!1,payload:l,verticalAlign:n="bottom",nameKey:d}=e,{config:i}=k();return(null==l?void 0:l.length)?(0,t.jsx)("div",{ref:a,className:(0,H.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",s),children:l.map(e=>{let a="".concat(d||e.dataKey||"value"),s=M(i,e,a);return(0,t.jsxs)("div",{className:(0,H.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!r?(0,t.jsx)(s.icon,{}):(0,t.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend";var S=s(57837);function R(e){let{data:a}=e,{t:s}=(0,S.o)(),r={backlog:{label:s("backlog"),color:"hsl(var(--chart-1))"},in_progress:{label:s("in_progress"),color:"hsl(var(--chart-2))"},review:{label:s("review"),color:"hsl(var(--chart-3))"},done:{label:s("done"),color:"hsl(var(--chart-4))"}};return(0,t.jsx)(C,{config:r,className:"w-full h-[300px]",children:(0,t.jsxs)(E.E,{data:a,margin:{top:20,right:20,bottom:5,left:0},children:[(0,t.jsx)(g.d,{vertical:!1}),(0,t.jsx)(Q.W,{dataKey:"name",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>e.split(" ")[0]}),(0,t.jsx)(f.h,{}),(0,t.jsx)(v.m,{cursor:{fill:"hsl(var(--muted))"},content:(0,t.jsx)(F,{})}),(0,t.jsx)(N.s,{}),(0,t.jsx)(I.y,{dataKey:"backlog",stackId:"a",fill:"var(--color-backlog)",radius:[4,4,0,0]}),(0,t.jsx)(I.y,{dataKey:"in_progress",stackId:"a",fill:"var(--color-in_progress)"}),(0,t.jsx)(I.y,{dataKey:"review",stackId:"a",fill:"var(--color-review)"}),(0,t.jsx)(I.y,{dataKey:"done",stackId:"a",fill:"var(--color-done)"})]})})}var J=s(8782),Z=s(34e3),z=s(54811);function L(e){let{data:a}=e,{t:s}=(0,S.o)(),r={done:{label:s("done")}},l=a.filter(e=>e.total>0);return(0,t.jsx)(C,{config:r,className:"mx-auto aspect-square h-[300px]",children:(0,t.jsxs)(J.r,{children:[(0,t.jsx)(v.m,{cursor:{fill:"hsl(var(--muted))"},content:(0,t.jsx)(F,{nameKey:"name"})}),(0,t.jsx)(Z.F,{data:l,dataKey:"done",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,labelLine:!1,label:e=>{let{cx:a,cy:s,midAngle:r,innerRadius:l,outerRadius:n,percent:d}=e,i=l+(n-l)*.5,c=a+i*Math.cos(-(Math.PI/180*r)),A=s+i*Math.sin(-(Math.PI/180*r));return d<.05?null:(0,t.jsx)("text",{x:c,y:A,fill:"hsl(var(--primary-foreground))",textAnchor:"middle",dominantBaseline:"central",children:"".concat((100*d).toFixed(0),"%")})},children:l.map((e,a)=>(0,t.jsx)(z.f,{fill:"hsl(var(--chart-".concat(a%5+1,"))")},"cell-".concat(a)))}),(0,t.jsx)(N.s,{})]})})}let P=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,H.cn)("w-full caption-bottom text-sm",s),...r})})});P.displayName="Table";let O=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("thead",{ref:a,className:(0,H.cn)("[&_tr]:border-b",s),...r})});O.displayName="TableHeader";let U=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,H.cn)("[&_tr:last-child]:border-0",s),...r})});U.displayName="TableBody",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,H.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let G=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("tr",{ref:a,className:(0,H.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});G.displayName="TableRow";let $=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("th",{ref:a,className:(0,H.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});$.displayName="TableHead";let W=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("td",{ref:a,className:(0,H.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});function T(e){let{data:a}=e,{t:s}=(0,S.o)();return(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{className:"w-[250px]",children:s("member")}),(0,t.jsx)($,{className:"text-center",children:s("total")}),(0,t.jsx)($,{className:"text-center",children:s("backlog")}),(0,t.jsx)($,{className:"text-center",children:s("in_progress")}),(0,t.jsx)($,{className:"text-center",children:s("review")}),(0,t.jsx)($,{className:"text-center",children:s("done")})]})}),(0,t.jsxs)(U,{children:[a.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:e.name}),(0,t.jsx)(W,{className:"text-center",children:e.total}),(0,t.jsx)(W,{className:"text-center",children:e.backlog}),(0,t.jsx)(W,{className:"text-center",children:e.in_progress}),(0,t.jsx)(W,{className:"text-center",children:e.review}),(0,t.jsx)(W,{className:"text-center",children:e.done})]},e.name)),0===a.length&&(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:6,className:"h-24 text-center",children:s("no_data_available")})})]})]})})}W.displayName="TableCell",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("caption",{ref:a,className:(0,H.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var V=s(74601),q=s(50172),Y=s(6523),K=s(34477);let X=(0,K.createServerReference)("40c0c40fc8960b65b7659c9815152cb4c7a2fd936b",K.callServer,void 0,K.findSourceMapURL,"generateTeamInsights");var ee=s(60760),ea=s(1978),es=s(74466);let et=(0,es.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),er=r.forwardRef((e,a)=>{let{className:s,variant:r,...l}=e;return(0,t.jsx)("div",{ref:a,role:"alert",className:(0,H.cn)(et({variant:r}),s),...l})});er.displayName="Alert";let el=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h5",{ref:a,className:(0,H.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});el.displayName="AlertTitle";let en=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,H.cn)("text-sm [&_p]:leading-relaxed",s),...r})});en.displayName="AlertDescription";var ed=s(85057),ei=s(7359),ec=s(79556),eA=s(77381),eo=s(10518);let ep=ei.bL;ei.YJ;let em=ei.WT,eu=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(ei.l9,{ref:a,className:(0,H.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,t.jsx)(ei.In,{asChild:!0,children:(0,t.jsx)(ec.A,{className:"h-4 w-4 opacity-50"})})]})});eu.displayName=ei.l9.displayName;let ex=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ei.PP,{ref:a,className:(0,H.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(eA.A,{className:"h-4 w-4"})})});ex.displayName=ei.PP.displayName;let eB=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ei.wn,{ref:a,className:(0,H.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(ec.A,{className:"h-4 w-4"})})});eB.displayName=ei.wn.displayName;let eh=r.forwardRef((e,a)=>{let{className:s,children:r,position:l="popper",...n}=e;return(0,t.jsx)(ei.ZL,{children:(0,t.jsxs)(ei.UC,{ref:a,className:(0,H.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,t.jsx)(ex,{}),(0,t.jsx)(ei.LM,{className:(0,H.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(eB,{})]})})});eh.displayName=ei.UC.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ei.JU,{ref:a,className:(0,H.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=ei.JU.displayName;let eb=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(ei.q7,{ref:a,className:(0,H.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(ei.VF,{children:(0,t.jsx)(eo.A,{className:"h-4 w-4"})})}),(0,t.jsx)(ei.p4,{children:r})]})});eb.displayName=ei.q7.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ei.wv,{ref:a,className:(0,H.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=ei.wv.displayName;var ej=s(26597),eE=s(52699),eg=s.n(eE);function eQ(e){let{byUser:a}=e,[s,n]=(0,r.useState)(null),[d,i]=(0,r.useState)(!1),[c,A]=(0,r.useState)(null),[o,p]=(0,r.useState)("summary"),[m,u]=(0,r.useState)("all"),{t:x,language:B}=(0,S.o)(),h=async()=>{i(!0),A(null),n(null);let e=a.filter(e=>e.name&&"Unassigned"!==e.name&&!e.name.startsWith("user-")&&"undefined"!==e.name);try{let a=await X({taskDistribution:e,reportType:o,target:m,isTeamReport:"all"===m,isSummaryReport:"summary"===o});a.insights?n(a.insights):A(x("failed_to_generate_insights"))}catch(e){console.error("Error in generateTeamInsights action:",e),A(e.message||x("failed_to_generate_insights"))}i(!1)},b=async()=>{if(s)try{let e="all"===m?x("all"):m,a="summary"===o?x("summary"):x("detailed"),t="".concat(x("ai_powered_insights")," - ").concat(a," (").concat(e,")"),r=document.createElement("div");r.style.cssText="\n        position: absolute;\n        left: -9999px;\n        top: -9999px;\n        width: 794px; /* A4 width in pixels */\n        padding: 40px;\n        background: white;\n        font-family: 'Amiri', 'Noto Sans Arabic', Arial, sans-serif;\n        direction: rtl;\n        color: #000;\n      ",r.innerHTML="\n        <h1 style=\"font-size: 24px; margin-bottom: 20px; text-align: right; color: #1a1a1a; font-family: 'Amiri', sans-serif;\">\n          ".concat(t,'\n        </h1>\n        <div style="font-size: 14px; line-height: 1.8; text-align: right; white-space: pre-wrap;">\n          ').concat(s,"\n        </div>\n      "),document.body.appendChild(r);let l=await eg()(r,{scale:2,useCORS:!0,logging:!1});document.body.removeChild(r);let n=new ej.Ay({orientation:"portrait",unit:"px",format:"a4"});n.addFileToVFS("Amiri-Regular.ttf","AAEAAAARAQAABAAQRFNJRwAAAAAAAQAAAAIAAAGQAAAAKEdERUYAAAKQAAABCAAABy5PUy8yAAAEaAAAAF8AAABgYXnE+mNtYXAAAAZIAAAA3AAAAO5prIQ7Y3Z0IAAABygAAAAoAAAAKgnJADZmcGdtAAAILAAAAWAAAAG5L4s2UWdhc3AAABCoAAAAEAAAAAwigAFnbHlmAAAEsAAAAzgAABZQi1sQZWhlYWQAAAAsAAAANgAAADYGIAc3aGhlYQAAATgAAAAkAAAAJAgVAiFobXR4AAABQAAAAC4AAABEljAADGtlcm4AABBgAAABJAAAAXR0oTcmbG9jYQAAAzgAAAAuAAAALgy4Ad5tYXhwAAABDAAAACAAAAAgAEMAFG5hbWUAAAWoAAABVwAAAqxxp+k/cG9zdAAAEHAAAAAcAAAAIAAAAAABAAEAAAAJAEgAawADAAEAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAACAAAEAAAADAAcAAwAAAAAAAgAAAAoACgAAAP8AAAAAAAAAAQAAA+j/agAAB9sAAAAAAAABCAAAAAcAAAAAAAADAAEAAgAAACYABwAAAAAAAP8A3gBEAAEAAAAAAAEACgAWAAEAAAAAAAIABwAdAAEAAAAAAAMACgApAAEAAAAAAAQABwAyAAEAAAAAAAUACgA8AAEAAAAAAAYABwBFAAEAAAAAAAoANAGwAAMAAQQJAAEADgByAAMAAQQJAAIADgB+AAMAAQQJAAMANgCQAAMAAQQJAAQADgDMAAMAAQQJAAUANgEOAAMAAQQJAAYADgE6AAMAAQQJAAoA0AXYYW1pcgBSAGUAZwB1AGwAYQByAFMAaABpAG4gdABhAGMAeQBwAGUA OgAgAEEAbQBpAHIAaQAgADoAIAAyADAAMQAxAFIAZQB2AGkAcwBpAG8AbgAgADEALgAwADAANQBBAEEAbQBpAHIAaQBSAGUAZwB1AGwAYQByAFMAaABpAG4gdABhAGMAeQBwAGUAOgAgAEEAbQBpAHIAaQAgADoAIAAyADAAMQAxAFIAZQB2AGkAcwBpAG8AbgAgADEALgAwADAANQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBSAGUAZwB1AGwAYQByAFMAaABpAG4gdABhAGMAeQBwAGUAOgAgAEEAbQBpAHIAaQAgADoAIAAyADAAMQAxAFIAZQB2AGkAcwBpAG8AbgAgADEALgAwADAANQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBSAGUAZwB1AGwAYQByAFMAaABpAG4gdABhAGMAeQBwAGUAOgAgAEEAbQBpAHIAaQAgADoAIAAyADAAMQAxAFIAZQB2AGkAcwBpAG8AbgAgADEALgAwADAANQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQBpAHIAaQBBAEEAbQoYAAAA"),n.addFont("Amiri-Regular.ttf","Amiri","normal"),n.setFont("Amiri");let d=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),c=l.width,A=l.height,p=Math.min(d/c,i/A);n.addImage(l.toDataURL("image/png"),"PNG",(d-c*p)/2,10,c*p,A*p),n.save("ai-insights-report.pdf")}catch(e){console.error("Error generating PDF:",e),A("Failed to generate PDF")}},E=a.filter(e=>e.name&&"Unassigned"!==e.name&&!e.name.startsWith("user-")&&"undefined"!==e.name);return(0,t.jsxs)(j.Zp,{className:"bg-card/50 border-primary/20 border-2 shadow-lg",children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(V.A,{className:"text-primary"}),x("ai_powered_insights")]}),(0,t.jsx)(j.BT,{children:x("ai_powered_insights_desc")})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,t.jsx)(l.$,{onClick:h,disabled:d,className:"w-full sm:w-auto",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.A,{className:"mr-2 h-4 w-4 animate-spin"}),x("generating"),"..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V.A,{className:"mr-2 h-4 w-4"}),x("generate_insights")]})}),s&&(0,t.jsxs)(l.$,{onClick:b,variant:"outline",children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),x("download_pdf")]})]})]})}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"report-type",children:x("report_type")}),(0,t.jsxs)(ep,{value:o,onValueChange:p,dir:"ar"===B?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"report-type",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"summary",children:x("summary")}),(0,t.jsx)(eb,{value:"detailed",children:x("detailed")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"report-target",children:x("report_target")}),(0,t.jsxs)(ep,{value:m,onValueChange:u,dir:"ar"===B?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"report-target",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:x("all")}),E.map(e=>(0,t.jsx)(eb,{value:e.name,children:e.name},e.name))]})]})]})]}),(0,t.jsx)(ee.N,{children:(d||s||c)&&(0,t.jsxs)(ea.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[d&&(0,t.jsxs)("div",{className:"flex items-center gap-4 text-muted-foreground p-4 rounded-lg bg-muted/50",children:[(0,t.jsx)(q.A,{className:"animate-spin"}),(0,t.jsx)("p",{children:x("ai_analyzing_data")})]}),c&&(0,t.jsxs)(er,{variant:"destructive",children:[(0,t.jsx)(el,{children:x("error")}),(0,t.jsx)(en,{children:c})]}),s&&(0,t.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none p-4 rounded-lg bg-muted/50 whitespace-pre-wrap font-body",children:s})]})})]})]})}var ef=s(4033),ev=s(25318);let eN=ef.bL,eI=ef.l9,ey=ef.ZL;ef.bm;let eH=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.hJ,{ref:a,className:(0,H.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});eH.displayName=ef.hJ.displayName;let e_=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(ey,{children:[(0,t.jsx)(eH,{}),(0,t.jsxs)(ef.UC,{ref:a,className:(0,H.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[r,(0,t.jsxs)(ef.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(ev.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});e_.displayName=ef.UC.displayName;let ew=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,H.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};ew.displayName="DialogHeader";let ek=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,H.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};ek.displayName="DialogFooter";let eC=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.hE,{ref:a,className:(0,H.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});eC.displayName=ef.hE.displayName;let eD=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.VY,{ref:a,className:(0,H.cn)("text-sm text-muted-foreground",s),...r})});eD.displayName=ef.VY.displayName;var eF=s(62523);let eM=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,H.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});eM.displayName="Textarea";var eS=s(11212),eR=s(35317),eJ=s(87481),eZ=s(40610),ez=s(3310);function eL(){let{firestore:e}=(0,eS.useFirebase)(),{toast:a}=(0,eJ.dj)(),s=a=>{if(!e)throw Error("Firestore not initialized");return(0,eR.rJ)(e,a)},t=(a,s)=>{if(!e)throw Error("Firestore not initialized");return(0,eR.H9)(e,a,s)};return{addDoc:(e,t)=>{let r=s(e);(0,eR.gS)(r,t).then(()=>{a({title:"Success",description:"Document added successfully."})}).catch(e=>{let a=new eZ.$({path:r.path,operation:"create",requestResourceData:t});ez.d.emit("permission-error",a)})},updateDoc:(e,s,r)=>{let l=t(e,s);(0,eR.mZ)(l,r).then(()=>{a({title:"Success",description:"Document updated successfully."})}).catch(e=>{let a=new eZ.$({path:l.path,operation:"update",requestResourceData:r});ez.d.emit("permission-error",a)})},deleteDoc:(e,s)=>{let r=t(e,s);(0,eR.kd)(r).then(()=>{a({title:"Success",description:"Document deleted successfully."})}).catch(e=>{let a=new eZ.$({path:r.path,operation:"delete"});ez.d.emit("permission-error",a)})}}}function eP(e){let{firestore:a,user:s}=(0,eS.useFirebase)(),t=a&&"admin"===e,r=a&&s&&e&&"admin"!==e,l=(0,eS.useMemoFirebase)(()=>t?(0,eR.P)((0,eR.rJ)(a,"users")):null,[a,t]),{data:n}=(0,eS.useCollection)(l),d=(0,eS.useMemoFirebase)(()=>r?(0,eR.H9)(a,"users",s.uid):null,[a,s,r]),{data:i}=(0,eS.useDoc)(d);return"admin"===e?n:i?[i]:[]}var eO=s(66286);let eU=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(eO.bL,{ref:a,className:(0,H.cn)("relative overflow-hidden",s),...l,children:[(0,t.jsx)(eO.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(eG,{}),(0,t.jsx)(eO.OK,{})]})});eU.displayName=eO.bL.displayName;let eG=r.forwardRef((e,a)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,t.jsx)(eO.VM,{ref:a,orientation:r,className:(0,H.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,t.jsx)(eO.lr,{className:"relative flex-1 rounded-full bg-border"})})});eG.displayName=eO.VM.displayName;var e$=s(26126),eW=s(17313),eT=s(67820);let eV=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(eT.bL,{ref:a,className:(0,H.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,t.jsx)(eT.C1,{className:(0,H.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(eo.A,{className:"h-4 w-4"})})})});eV.displayName=eT.bL.displayName;var eq=s(58127),eY=s(77223);function eK(e){let{checklist:a,onChange:s,readonly:n=!1}=e,[d,i]=(0,r.useState)(""),{t:c}=(0,S.o)(),A=()=>{d.trim()&&(s([...a,{id:Date.now().toString(),title:d.trim(),done:!1,createdAt:new Date}]),i(""))},o=e=>{s(a.map(a=>a.id===e?{...a,done:!a.done}:a))},p=e=>{s(a.filter(a=>a.id!==e))},m=a.filter(e=>e.done).length,u=a.length,x=u>0?m/u*100:0;return(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(eq.A,{className:"h-5 w-5"}),c("checklist")]}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[m," / ",u," ",c("completed")]})]}),u>0&&(0,t.jsx)("div",{className:"w-full bg-secondary rounded-full h-2 mt-2",children:(0,t.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:"".concat(x,"%")}})})]}),(0,t.jsxs)(j.Wu,{className:"space-y-3",children:[a.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,t.jsx)(eV,{checked:e.done,onCheckedChange:()=>!n&&o(e.id),disabled:n}),(0,t.jsx)("span",{className:"flex-1 ".concat(e.done?"line-through text-muted-foreground":""),children:e.title}),!n&&(0,t.jsx)(l.$,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(e.id),children:(0,t.jsx)(eY.A,{className:"h-4 w-4"})})]},e.id)),!n&&(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(eF.p,{placeholder:c("add_checklist_item"),value:d,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&A()}),(0,t.jsx)(l.$,{onClick:A,size:"icon",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})]})]})]})}var eX=s(61840);function e0(e){let{research:a,onChange:s,readonly:n=!1}=e,[d,i]=(0,r.useState)(!1),[c,A]=(0,r.useState)({type:"other"}),{t:p}=(0,S.o)(),m=e=>{s(a.filter(a=>a.id!==e))},u=e=>({ui:"bg-blue-500/10 text-blue-500",tech:"bg-green-500/10 text-green-500",competitor:"bg-orange-500/10 text-orange-500",other:"bg-gray-500/10 text-gray-500"})[e];return(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),p("research_hub")]}),!n&&(0,t.jsxs)(eN,{open:d,onOpenChange:i,children:[(0,t.jsx)(eI,{asChild:!0,children:(0,t.jsxs)(l.$,{size:"sm",variant:"outline",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"}),p("add_research")]})}),(0,t.jsxs)(e_,{children:[(0,t.jsx)(ew,{children:(0,t.jsx)(eC,{children:p("add_research_item")})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ed.J,{children:p("title")}),(0,t.jsx)(eF.p,{placeholder:p("research_title"),value:c.title||"",onChange:e=>A({...c,title:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ed.J,{children:p("url")}),(0,t.jsx)(eF.p,{placeholder:"https://...",type:"url",value:c.url||"",onChange:e=>A({...c,url:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ed.J,{children:p("type")}),(0,t.jsxs)(ep,{value:c.type,onValueChange:e=>A({...c,type:e}),children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"ui",children:"UI/UX"}),(0,t.jsx)(eb,{value:"tech",children:"Technical"}),(0,t.jsx)(eb,{value:"competitor",children:"Competitor"}),(0,t.jsx)(eb,{value:"other",children:"Other"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ed.J,{children:p("notes")}),(0,t.jsx)(eM,{placeholder:p("optional_notes"),value:c.notes||"",onChange:e=>A({...c,notes:e.target.value}),rows:3})]}),(0,t.jsx)(l.$,{onClick:()=>{var e,t,r;(null==(e=c.title)?void 0:e.trim())&&(null==(t=c.url)?void 0:t.trim())&&(s([...a,{id:Date.now().toString(),title:c.title.trim(),url:c.url.trim(),type:c.type||"other",notes:null==(r=c.notes)?void 0:r.trim(),createdAt:new Date}]),A({type:"other"}),i(!1))},className:"w-full",children:p("add")})]})]})]})]})}),(0,t.jsx)(j.Wu,{className:"space-y-3",children:0===a.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:p("no_research_items")}):a.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-md group hover:bg-accent/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.title}),(0,t.jsx)(e$.E,{className:u(e.type),variant:"secondary",children:e.type.toUpperCase()})]}),(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:[e.url,(0,t.jsx)(eX.A,{className:"h-3 w-3"})]}),e.notes&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.notes})]}),!n&&(0,t.jsx)(l.$,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>m(e.id),children:(0,t.jsx)(eY.A,{className:"h-4 w-4"})})]},e.id))})]})}var e2=s(67805),e1=s(31949);function e4(e){let{task:a,allTasks:s,onChange:r,readonly:l=!1}=e,{t:n}=(0,S.o)(),d=a.blocked_by||[],i=a.blocks||[],c=s.filter(e=>e.id!==a.id),A=e=>s.find(a=>a.id===e),o=e=>{r(d.filter(a=>a!==e),i)},p=e=>{r(d,i.filter(a=>a!==e))},m=d.some(e=>{let a=A(e);return a&&"done"!==a.status});return(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(e2.A,{className:"h-5 w-5"}),n("dependencies")]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[m&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:[(0,t.jsx)(e1.A,{className:"h-4 w-4 text-destructive"}),(0,t.jsx)("span",{className:"text-sm text-destructive font-medium",children:n("task_is_blocked")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:n("blocked_by")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>{let a=A(e);return a?(0,t.jsxs)(e$.E,{variant:"done"===a.status?"secondary":"destructive",className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate",children:a.title}),!l&&(0,t.jsx)("button",{onClick:()=>o(e),className:"ml-1 hover:bg-background/20 rounded-sm",children:(0,t.jsx)(ev.A,{className:"h-3 w-3"})})]},e):null})}),!l&&(0,t.jsxs)(ep,{onValueChange:e=>{d.includes(e)||r([...d,e],i)},children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{placeholder:n("add_blocker")})}),(0,t.jsx)(eh,{children:c.filter(e=>!d.includes(e.id)).map(e=>(0,t.jsxs)(eb,{value:e.id,children:[e.title," (",e.status,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:n("blocks_tasks")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>{let a=A(e);return a?(0,t.jsxs)(e$.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate",children:a.title}),!l&&(0,t.jsx)("button",{onClick:()=>p(e),className:"ml-1 hover:bg-background/20 rounded-sm",children:(0,t.jsx)(ev.A,{className:"h-3 w-3"})})]},e):null})}),!l&&(0,t.jsxs)(ep,{onValueChange:e=>{i.includes(e)||r(d,[...i,e])},children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{placeholder:n("add_blocked_task")})}),(0,t.jsx)(eh,{children:c.filter(e=>!i.includes(e.id)).map(e=>(0,t.jsxs)(eb,{value:e.id,children:[e.title," (",e.status,")"]},e.id))})]})]})]})]})}let e5={title:"",description:"",type:"work",assigned_to:[],created_by:"",client_id:void 0,progress:0,start_date:"",due_date:"",delivery_method:"upload",deliverable_location:"",deliverable_details:"",backend_conditions:"",frontend_conditions:"",ux_requirements:"",market_research_link:"",client_payment:0,backend_share_pct:0,frontend_share_pct:0,payment_schedule:"",status:"backlog",priority:"medium",tags:[],checklist:[],research:[],blocked_by:[],blocks:[],approvals:[],payment_status:"pending"};function e3(e){let{isOpen:a,onOpenChange:s,task:n,initialData:d}=e,{firestore:i,user:c}=(0,eS.useFirebase)(),{addDoc:A,updateDoc:o}=eL(),{toast:p}=(0,eJ.dj)(),{t:m,language:u}=(0,S.o)(),[x,B]=(0,r.useState)(e5),h=(0,eS.useMemoFirebase)(()=>i&&c?(0,eR.H9)(i,"users",c.uid):null,[i,c]),{data:b}=(0,eS.useDoc)(h),j=null==b?void 0:b.role,E=eP(j),g=(0,eS.useMemoFirebase)(()=>i?(0,eR.P)((0,eR.rJ)(i,"tasks")):null,[i]),{data:Q}=(0,eS.useCollection)(g),f=(0,eS.useMemoFirebase)(()=>i&&"admin"===j?(0,eR.P)((0,eR.rJ)(i,"clients")):null,[i,j]),{data:v}=(0,eS.useCollection)(f);(0,r.useEffect)(()=>{a?n?B({...n,start_date:n.start_date?n.start_date.split("T")[0]:"",due_date:n.due_date?n.due_date.split("T")[0]:""}):B({...e5,...d}):B(e5)},[n,d,a]);let N=(e,a)=>{B(s=>({...s,[e]:a}))},I=(e,a)=>{B(s=>{let t=s[e]||[];return t.includes(a)?{...s,[e]:t.filter(e=>e!==a)}:{...s,[e]:[...t,a]}})},y=async()=>{if(!i||!c)return void p({variant:"destructive",title:"Error",description:m("must_be_logged_in_to_create_task")});if(!x.title||!x.type)return void p({variant:"destructive",title:"Error",description:m("task_title_required")});if((x.backend_share_pct||0)+(x.frontend_share_pct||0)>100)return void p({variant:"destructive",title:m("error_title"),description:m("share_percentage_error")});try{let e={...x,created_by:c.uid,updatedAt:(0,eR.O5)()};n?o("tasks",n.id,e):A("tasks",{...e,createdAt:(0,eR.O5)()}),p({title:m("task_created_title"),description:"".concat(m("task_created_desc"),' "').concat(x.title,'"')}),s(!1)}catch(e){console.error("Error creating/updating task:",e),p({variant:"destructive",title:m("error_title"),description:m("error_desc")})}};return(0,t.jsx)(eN,{open:a,onOpenChange:s,children:(0,t.jsxs)(e_,{className:"max-w-4xl",dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:n?m("edit_task"):m("create_task")}),(0,t.jsx)(eD,{children:n?m("edit_task_desc"):m("create_task_desc")})]}),(0,t.jsx)(eU,{className:"max-h-[70vh]",children:(0,t.jsxs)(eW.tU,{defaultValue:"basic",className:"w-full",dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsxs)(eW.j7,{className:"grid w-full grid-cols-5 mb-4",children:[(0,t.jsx)(eW.Xi,{value:"basic",children:m("basic_info")}),(0,t.jsx)(eW.Xi,{value:"details",children:m("details")}),(0,t.jsx)(eW.Xi,{value:"checklist",children:m("checklist")}),(0,t.jsx)(eW.Xi,{value:"dependencies",children:m("dependencies")}),(0,t.jsx)(eW.Xi,{value:"research",children:m("research_hub")})]}),(0,t.jsx)(eW.av,{value:"basic",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(ed.J,{htmlFor:"title",children:[m("title"),"*"]}),(0,t.jsx)(eF.p,{id:"title",value:x.title,onChange:e=>N("title",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"description",children:m("description")}),(0,t.jsx)(eM,{id:"description",value:x.description||"",onChange:e=>N("description",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"status",children:m("status")}),(0,t.jsxs)(ep,{value:x.status,onValueChange:e=>N("status",e),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"status",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"backlog",children:m("backlog")}),(0,t.jsx)(eb,{value:"in_progress",children:m("in_progress")}),(0,t.jsx)(eb,{value:"review",children:m("review")}),(0,t.jsx)(eb,{value:"done",children:m("done")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(ed.J,{htmlFor:"type",children:[m("type"),"*"]}),(0,t.jsxs)(ep,{value:x.type,onValueChange:e=>N("type",e),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"type",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"work",children:m("work")}),(0,t.jsx)(eb,{value:"training",children:m("training")})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"priority",children:m("priority")}),(0,t.jsxs)(ep,{value:x.priority,onValueChange:e=>N("priority",e),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"priority",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"low",children:m("low")}),(0,t.jsx)(eb,{value:"medium",children:m("medium")}),(0,t.jsx)(eb,{value:"high",children:m("high")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"assignee",children:m("assignees")}),(0,t.jsxs)(ep,{onValueChange:e=>I("assigned_to",e),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"assignee",children:(0,t.jsx)(em,{placeholder:m("select_members")})}),(0,t.jsx)(eh,{children:null==E?void 0:E.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName},e.id))})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:x.assigned_to.map(e=>{let a=null==E?void 0:E.find(a=>a.id===e);return a?(0,t.jsx)(e$.E,{variant:"secondary",children:a.fullName},e):null})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"start-date",children:m("start_date")}),(0,t.jsx)(eF.p,{id:"start-date",type:"date",value:x.start_date||"",onChange:e=>N("start_date",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"due-date",children:m("due_date")}),(0,t.jsx)(eF.p,{id:"due-date",type:"date",value:x.due_date||"",onChange:e=>N("due_date",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"client",children:m("client")}),(0,t.jsxs)(ep,{value:x.client_id||"",onValueChange:e=>N("client_id",e||void 0),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"client",children:(0,t.jsx)(em,{placeholder:m("select_client")})}),(0,t.jsx)(eh,{children:null==v?void 0:v.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"client_payment",children:m("client_payment")}),(0,t.jsx)(eF.p,{id:"client_payment",type:"number",value:x.client_payment||0,onChange:e=>N("client_payment",parseFloat(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"backend_share_pct",children:m("backend_share")}),(0,t.jsx)(eF.p,{id:"backend_share_pct",type:"number",value:x.backend_share_pct||0,onChange:e=>N("backend_share_pct",parseFloat(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"frontend_share_pct",children:m("frontend_share")}),(0,t.jsx)(eF.p,{id:"frontend_share_pct",type:"number",value:x.frontend_share_pct||0,onChange:e=>N("frontend_share_pct",parseFloat(e.target.value)||0)})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"payment_schedule",children:m("payment_schedule")}),(0,t.jsx)(eF.p,{id:"payment_schedule",value:x.payment_schedule||"",onChange:e=>N("payment_schedule",e.target.value)})]})]})]})}),(0,t.jsxs)(eW.av,{value:"details",className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"deliverable_location",children:m("deliverable_location")}),(0,t.jsx)(eF.p,{id:"deliverable_location",value:x.deliverable_location||"",onChange:e=>N("deliverable_location",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"delivery_method",children:m("delivery_method")}),(0,t.jsxs)(ep,{value:x.delivery_method,onValueChange:e=>N("delivery_method",e),dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"delivery_method",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"in_person",children:m("in_person")}),(0,t.jsx)(eb,{value:"upload",children:m("upload")}),(0,t.jsx)(eb,{value:"link",children:m("link")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"deliverable_details",children:m("deliverable_details")}),(0,t.jsx)(eM,{id:"deliverable_details",value:x.deliverable_details||"",onChange:e=>N("deliverable_details",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"ux_requirements",children:m("ux_requirements")}),(0,t.jsx)(eM,{id:"ux_requirements",value:x.ux_requirements||"",onChange:e=>N("ux_requirements",e.target.value),rows:3})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"backend_conditions",children:m("backend_conditions")}),(0,t.jsx)(eM,{id:"backend_conditions",value:x.backend_conditions||"",onChange:e=>N("backend_conditions",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"frontend_conditions",children:m("frontend_conditions")}),(0,t.jsx)(eM,{id:"frontend_conditions",value:x.frontend_conditions||"",onChange:e=>N("frontend_conditions",e.target.value)})]})]}),(0,t.jsx)(eW.av,{value:"checklist",className:"p-4",children:(0,t.jsx)(eK,{checklist:x.checklist||[],onChange:e=>N("checklist",e)})}),(0,t.jsx)(eW.av,{value:"dependencies",className:"p-4",children:(0,t.jsx)(e4,{task:x,allTasks:Q||[],onChange:(e,a)=>{N("blocked_by",e),N("blocks",a)}})}),(0,t.jsx)(eW.av,{value:"research",className:"p-4",children:(0,t.jsx)(e0,{research:x.research||[],onChange:e=>N("research",e)})})]})}),(0,t.jsxs)(ek,{className:"border-t pt-4",children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>s(!1),children:m("cancel")}),(0,t.jsx)(l.$,{onClick:y,children:m("save_task")})]})]})})}var e6=s(93004),e8=s(17104),e7=s(3638),e9=s(80644),ae=s(53941),aa=s(43554),as=s(27682);function at(){let{user:e,firestore:a}=(0,eS.useFirebase)(),{addDoc:s,updateDoc:n}=eL(),{t:d}=(0,S.o)(),i=(0,r.useMemo)(()=>(0,e9.o)(new Date),[]),c=(0,r.useMemo)(()=>(0,ae.D)(new Date),[]),o=(0,r.useMemo)(()=>(0,aa.e)(new Date,7),[]),p=(0,eS.useMemoFirebase)(()=>a&&e?(0,eR.P)((0,eR.rJ)(a,"attendance"),(0,eR._M)("userId","==",e.uid),(0,eR._M)("clockOut","==",null),(0,eR.AB)(1)):null,[a,e]),m=(0,eS.useMemoFirebase)(()=>a&&e?(0,eR.P)((0,eR.rJ)(a,"attendance"),(0,eR._M)("userId","==",e.uid),(0,eR._M)("clockIn",">=",i),(0,eR._M)("clockIn","<=",c),(0,eR._M)("clockOut","!=",null),(0,eR.AB)(1)):null,[a,e,i,c]),{data:u,isLoading:x}=(0,eS.useCollection)(p),{data:B,isLoading:b}=(0,eS.useCollection)(m),E=(0,eS.useMemoFirebase)(()=>a&&e?(0,eR.P)((0,eR.rJ)(a,"attendance"),(0,eR._M)("userId","==",e.uid),(0,eR._M)("clockIn",">=",o),(0,eR.My)("clockIn","desc"),(0,eR.AB)(10)):null,[a,e,o]),{data:g}=(0,eS.useCollection)(E),Q=x||b,f=(0,r.useMemo)(()=>{var e;if(!u||0===u.length)return null;let a=u[0],s=null==(e=a.clockIn)?void 0:e.toDate();return s&&s>=i&&s<=c?a:null},[u,i,c]),v=(0,r.useMemo)(()=>B&&B.length>0?B[0]:null,[B]),N=!Q&&!f&&!v,I=!Q&&!!f,y=e=>e?e.toDate?(0,as.GP)(e.toDate(),"p"):d("pending"):d("n_a"),H=e=>e&&e.toDate?(0,as.GP)(e.toDate(),"dd/MM/yyyy"):d("n_a"),_=(e,a)=>{if(!e||!a)return d("n_a");if(!e.toDate||!a.toDate)return d("in_progress");let s=e.toDate(),t=a.toDate().getTime()-s.getTime(),r=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);return"".concat(r).concat(d("hours_short")," ").concat(l).concat(d("minutes_short"))},w=d("not_clocked_in"),k=d("not_clocked_in_desc");return f?(w=d("clocked_in"),k="".concat(d("in"),": ").concat(y(f.clockIn)," | ").concat(d("out"),": ").concat(d("pending"))):v&&(w=d("clocked_out"),k="".concat(d("in"),": ").concat(y(v.clockIn)," | ").concat(d("out"),": ").concat(y(v.clockOut))),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(A.A,{}),d("attendance")]})}),(0,t.jsx)(j.Wu,{className:"space-y-4",children:Q?(0,t.jsx)("p",{children:d("loading_attendance_status")}):(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-4 rounded-lg bg-muted/50",children:[(0,t.jsxs)("div",{className:"text-center sm:text-left",children:[(0,t.jsxs)("p",{className:"font-medium",children:[d("status"),": ",w]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:k})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,t.jsxs)(l.$,{onClick:()=>{a&&e&&s("attendance",{userId:e.uid,clockIn:(0,eR.O5)(),clockOut:null})},disabled:!N,variant:N?"default":"secondary",children:[(0,t.jsx)(e8.A,{className:"mr-2"})," ",d("clock_in")]}),(0,t.jsxs)(l.$,{onClick:()=>{a&&f&&n("attendance",f.id,{clockOut:(0,eR.O5)()})},disabled:!I,variant:I?"default":"outline",children:[(0,t.jsx)(h.A,{className:"mr-2"})," ",d("clock_out")]})]})]})})]}),g&&g.length>0&&(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2 text-base",children:[(0,t.jsx)(e7.A,{className:"h-4 w-4"}),d("last_7_days")]})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:d("date")}),(0,t.jsx)($,{children:d("clock_in")}),(0,t.jsx)($,{children:d("clock_out")}),(0,t.jsx)($,{children:d("duration")})]})}),(0,t.jsx)(U,{children:g.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:H(e.clockIn)}),(0,t.jsx)(W,{children:y(e.clockIn)}),(0,t.jsx)(W,{children:e.clockOut?y(e.clockOut):(0,t.jsx)("span",{className:"text-yellow-600",children:d("in_progress")})}),(0,t.jsx)(W,{children:_(e.clockIn,e.clockOut)})]},e.id))})]})})})]})]})}var ar=s(51920),al=s(68718),an=s(91721),ad=s(19164),ai=s(74641),ac=s(3925);function aA(){let{firestore:e,user:a}=(0,eS.useFirebase)(),{t:s,language:n}=(0,S.o)(),[d,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[p,m]=(0,r.useState)("all");(0,r.useEffect)(()=>{let e=new Date;i(e.getMonth()),o(e.getFullYear())},[]);let u=eP("admin"),x=(0,r.useMemo)(()=>{if(null===c||null===d){let e=new Date;return{start:(0,ad.w)(e),end:(0,ai.p)(e)}}let e=new Date(c,d,1);return{start:(0,ad.w)(e),end:(0,ai.p)(e)}},[d,c]),B=(0,eS.useMemoFirebase)(()=>{if(!e||null===c||null===d)return null;let a=[(0,eR._M)("clockIn",">=",x.start),(0,eR._M)("clockIn","<=",x.end),(0,eR.My)("clockIn","desc")];return"all"!==p&&a.unshift((0,eR._M)("userId","==",p)),(0,eR.P)((0,eR.rJ)(e,"attendance"),...a)},[e,x,p,c,d]),{data:h,isLoading:b}=(0,eS.useCollection)(B),E=(0,r.useMemo)(()=>h&&u?h.map(e=>{let a=u.find(a=>a.id===e.userId);return{...e,userName:a?"".concat(a.fullName):s("unknown_user"),userRole:a?"".concat(a.role):s("n_a")}}):[],[h,u,s]),g=(0,r.useMemo)(()=>{let e=new Map;return E.forEach(a=>{if(!a.clockOut)return;let s=a.userId;e.has(s)||e.set(s,{name:a.userName,role:a.userRole,totalDays:0,totalHours:0,avgHoursPerDay:0});let t=e.get(s),r=a.clockIn.toDate(),l=(a.clockOut.toDate().getTime()-r.getTime())/36e5;t.totalDays++,t.totalHours+=l,t.avgHoursPerDay=t.totalHours/t.totalDays}),Array.from(e.values())},[E]),Q=e=>e?e.toDate?(0,as.GP)(e.toDate(),"dd/MM/yyyy hh:mm a"):s("pending"):s("n_a"),f=(e,a)=>{if(!e||!a)return s("n_a");if(!e.toDate||!a.toDate)return s("calculating");let t=e.toDate(),r=a.toDate().getTime()-t.getTime(),l=Math.floor(r/36e5),n=Math.floor(r%36e5/6e4);return"".concat(l).concat(s("hours_short")," ").concat(n).concat(s("minutes_short"))},v=Array.from({length:5},(e,a)=>new Date().getFullYear()-a);return null===d||null===c?(0,t.jsx)(j.Zp,{children:(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{children:[s("loading"),"..."]})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(ar.A,{}),s("attendance_report_title")]})}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:s("month")}),(0,t.jsxs)(ep,{value:d.toString(),onValueChange:e=>i(parseInt(e)),dir:"ar"===n?"rtl":"ltr",children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{})}),(0,t.jsx)(eh,{children:("ar"===n?["","","","","","","","","","","",""]:["January","February","March","April","May","June","July","August","September","October","November","December"]).map((e,a)=>(0,t.jsx)(eb,{value:a.toString(),children:e},a))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:s("year")}),(0,t.jsxs)(ep,{value:c.toString(),onValueChange:e=>o(parseInt(e)),dir:"ar"===n?"rtl":"ltr",children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{})}),(0,t.jsx)(eh,{children:v.map(e=>(0,t.jsx)(eb,{value:e.toString(),children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:s("employee")}),(0,t.jsxs)(ep,{value:p,onValueChange:m,dir:"ar"===n?"rtl":"ltr",children:[(0,t.jsx)(eu,{children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:s("all")}),null==u?void 0:u.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName},e.id))]})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)(l.$,{onClick:()=>{if(null===c||null===d)return;let e=E.map(e=>({[s("employee_name")]:e.userName,[s("role")]:e.userRole,[s("clock_in_date")]:Q(e.clockIn),[s("clock_out_date")]:Q(e.clockOut),[s("work_duration")]:f(e.clockIn,e.clockOut)})),a=ac.Wp.json_to_sheet(e),t=ac.Wp.book_new();ac.Wp.book_append_sheet(t,a,"Attendance");let r="Attendance_".concat(c,"_").concat(d+1,".xlsx");(0,ac._h)(t,r)},className:"w-full",children:[(0,t.jsx)(al.A,{className:"mr-2"}),s("export_excel")]})})]})})]}),g.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g.map(e=>(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"pb-3",children:[(0,t.jsxs)(j.ZB,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(an.A,{className:"h-4 w-4"}),e.name]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.role})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s("attendance_days"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.totalDays})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s("total_hours"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.totalHours.toFixed(1)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:[s("avg_hours_day"),":"]}),(0,t.jsx)("span",{className:"font-medium",children:e.avgHoursPerDay.toFixed(1)})]})]})})]},e.name))}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(A.A,{}),s("detailed_attendance_log")]})}),(0,t.jsx)(j.Wu,{children:b?(0,t.jsx)("p",{className:"text-center py-8",children:s("loading")}):0===E.length?(0,t.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:s("no_records_found")}):(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:s("employee_name")}),(0,t.jsx)($,{children:s("role")}),(0,t.jsx)($,{children:s("clock_in_date")}),(0,t.jsx)($,{children:s("clock_out_date")}),(0,t.jsx)($,{children:s("work_duration")})]})}),(0,t.jsx)(U,{children:E.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:e.userName}),(0,t.jsx)(W,{children:e.userRole}),(0,t.jsx)(W,{children:Q(e.clockIn)}),(0,t.jsx)(W,{children:e.clockOut?Q(e.clockOut):(0,t.jsx)("span",{className:"text-yellow-600",children:s("still_at_work")})}),(0,t.jsx)(W,{children:f(e.clockIn,e.clockOut)})]},e.id))})]})})})]})]})}let ao={name:"",link:"",duration:"",userId:""};function ap(e){let{isOpen:a,onOpenChange:s}=e,{firestore:n,user:d}=(0,eS.useFirebase)(),{toast:i}=(0,eJ.dj)(),{addDoc:c}=eL(),{t:A,language:o}=(0,S.o)(),[p,m]=(0,r.useState)(ao),u=eP("admin");(0,r.useEffect)(()=>{a||m(ao)},[a]);let x=(e,a)=>{m(s=>({...s,[e]:a}))},B=async()=>n&&d?p.name&&p.link&&p.duration&&p.userId?void(c("courses",{...p,status:"not_started"}),m(ao),s(!1)):void i({variant:"destructive",title:"Error",description:A("please_fill_all_fields")}):void i({variant:"destructive",title:"Error",description:A("must_be_logged_in_to_create_course")});return(0,t.jsx)(eN,{open:a,onOpenChange:s,children:(0,t.jsxs)(e_,{className:"sm:max-w-[425px]",dir:"ar"===o?"rtl":"ltr",children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:A("create_course")}),(0,t.jsx)(eD,{children:A("create_course_desc")})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"name",children:A("course_name")}),(0,t.jsx)(eF.p,{id:"name",value:p.name,onChange:e=>x("name",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"link",children:A("course_link")}),(0,t.jsx)(eF.p,{id:"link",type:"url",value:p.link,onChange:e=>x("link",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"duration",children:A("duration_placeholder")}),(0,t.jsx)(eF.p,{id:"duration",value:p.duration,onChange:e=>x("duration",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"assignee",children:A("assign_to")}),(0,t.jsxs)(ep,{value:p.userId,onValueChange:e=>x("userId",e),dir:"ar"===o?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"assignee",children:(0,t.jsx)(em,{placeholder:A("select_user")})}),(0,t.jsx)(eh,{children:null==u?void 0:u.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName},e.id))})]})]})]}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>s(!1),children:A("cancel")}),(0,t.jsx)(l.$,{onClick:B,children:A("create_course")})]})]})})}function am(e){let{userRole:a}=e,{t:s}=(0,S.o)(),{firestore:n,user:d}=(0,eS.useFirebase)(),[i,c]=(0,r.useState)(!1),A=(0,eS.useMemoFirebase)(()=>n&&d?(0,eR.P)((0,eR.rJ)(n,"courses"),(0,eR._M)("userId","==",d.uid)):null,[n,d]),{data:p,isLoading:m}=(0,eS.useCollection)(A);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ap,{isOpen:i,onOpenChange:c}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(o.A,{}),s("my_courses")]}),"admin"===a&&(0,t.jsxs)(l.$,{size:"sm",onClick:()=>c(!0),children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),s("add_course")]})]}),(0,t.jsx)(j.Wu,{children:m?(0,t.jsx)("p",{children:s("loading")}):p&&p.length>0?(0,t.jsx)("ul",{className:"space-y-2",children:p.map(e=>(0,t.jsxs)("li",{className:"p-3 rounded-md bg-muted/50 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.duration," - ",e.status]})]}),(0,t.jsx)(l.$,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:s("go_to_course")})})]},e.id))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-4",children:s("no_courses_assigned")})})]})]})}var au=s(93223),ax=s(17607),aB=s(14050);let ah=r.forwardRef((e,a)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,t.jsx)(aB.b,{ref:a,decorative:l,orientation:r,className:(0,H.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...n})});ah.displayName=aB.b.displayName;var ab=s(13300),aj=s(35007),aE=s(79783),ag=s(88390),aQ=s(45731),af=s(8376),av=s(24371);function aN(e){let{taskId:a,approvals:s,currentStatus:n,onApprove:d,onReject:i,canApprove:c=!1,readonly:o=!1}=e,[p,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),{t:B}=(0,S.o)(),{currentUser:h}=(0,eS.useFirebase)(),b=s&&s.length>0?s[s.length-1]:null,E="done"===n&&(!b||"rejected"===b.status);return(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(aQ.A,{className:"h-5 w-5"}),B("approvals")]}),b&&(0,t.jsx)(e$.E,{variant:"approved"===b.status?"default":"destructive",children:"approved"===b.status?B("approved"):B("rejected")})]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[s&&s.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:B("approval_history")}),s.map((e,a)=>{var s,r,l;return(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-md",children:[(0,t.jsx)("div",{className:"mt-1",children:"approved"===e.status?(0,t.jsx)(af.A,{className:"h-5 w-5 text-green-500"}):(0,t.jsx)(av.A,{className:"h-5 w-5 text-destructive"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:e.byName||e.by}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(null==(l=e.at)||null==(r=l.toDate)||null==(s=r.call(l))?void 0:s.toLocaleDateString())||new Date(e.at).toLocaleDateString()})]}),e.notes&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.notes})]})]},a)})]}),E&&!u&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-amber-500/10 border border-amber-500/20 rounded-md",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 text-amber-500"}),(0,t.jsx)("span",{className:"text-sm text-amber-600 dark:text-amber-500 font-medium",children:B("awaiting_approval")})]}),!o&&c&&E&&(0,t.jsx)(t.Fragment,{children:u?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium mb-2 block",children:[B("approval_notes")," (",B("optional"),")"]}),(0,t.jsx)(eM,{placeholder:B("add_notes_about_approval"),value:p,onChange:e=>m(e.target.value),rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.$,{onClick:()=>{d(p.trim()||void 0),m(""),x(!1)},className:"flex-1",variant:"default",children:[(0,t.jsx)(af.A,{className:"h-4 w-4 mr-2"}),B("approve")]}),(0,t.jsxs)(l.$,{onClick:()=>{if(!p.trim())return void alert(B("rejection_notes_required"));i(p.trim()),m(""),x(!1)},className:"flex-1",variant:"destructive",children:[(0,t.jsx)(av.A,{className:"h-4 w-4 mr-2"}),B("reject")]})]}),(0,t.jsx)(l.$,{onClick:()=>{x(!1),m("")},variant:"ghost",className:"w-full",size:"sm",children:B("cancel")})]}):(0,t.jsx)(l.$,{onClick:()=>x(!0),className:"w-full",variant:"outline",children:B("review_task")})}),!E&&(null==b?void 0:b.status)==="approved"&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 rounded-md",children:[(0,t.jsx)(af.A,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{className:"text-sm text-green-600 dark:text-green-500 font-medium",children:B("task_approved")})]})]})]})}function aI(e){var a;let{isOpen:s,onOpenChange:r,task:n}=e,{updateDoc:d}=eL(),{t:i}=(0,S.o)(),{user:c}=(0,eS.useFirebase)(),A={backlog:{nextStatus:"in_progress",label:i("start_progress"),icon:(0,t.jsx)(ab.A,{className:"mr-2"})},in_progress:{nextStatus:"review",label:i("submit_for_review"),icon:(0,t.jsx)(aj.A,{className:"mr-2"})},review:{nextStatus:"done",label:i("mark_as_done"),icon:(0,t.jsx)(au.A,{className:"mr-2"})},done:null};if(!n)return null;let o=A[n.status],p=e=>{if(!e)return null;let a=/(https?:\/\/[^\s]+)/g;return e.split(a).map((e,s)=>e.match(a)?(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 break-all",children:e},s):(0,t.jsx)("span",{children:e},s))};return(0,t.jsx)(eN,{open:s,onOpenChange:r,children:(0,t.jsxs)(e_,{className:"max-w-3xl",children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{className:"font-headline text-2xl",children:n.title}),(0,t.jsxs)(eD,{children:[i("due_by")," ",n.due_date?new Date(n.due_date).toLocaleDateString():i("n_a")]})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4 max-h-[70vh] overflow-y-auto pr-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-semibold",children:[i("status"),":"]}),(0,t.jsx)(e$.E,{variant:"done"===n.status?"default":"secondary",children:(a=n.status,({backlog:i("backlog"),in_progress:i("in_progress"),review:i("review"),done:i("done")})[a]||a)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-semibold",children:[i("priority"),":"]}),(e=>{switch(e){case"high":return(0,t.jsx)(e$.E,{variant:"destructive",children:i("high")});case"medium":return(0,t.jsx)(e$.E,{variant:"secondary",children:i("medium")});default:return(0,t.jsx)(e$.E,{variant:"outline",children:i("low")})}})(n.priority)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-semibold",children:[i("type"),":"]}),(0,t.jsx)(e$.E,{variant:"outline",children:"work"===n.type?i("work"):i("training")})]})]}),(0,t.jsx)(ah,{}),n.checklist&&n.checklist.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eK,{checklist:n.checklist||[],onChange:()=>{},readonly:!0}),(0,t.jsx)(ah,{})]}),n.approvals&&n.approvals.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(aN,{taskId:n.id,approvals:n.approvals||[],currentStatus:n.status,onApprove:()=>{},onReject:()=>{},readonly:!0}),(0,t.jsx)(ah,{})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:i("description")}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:n.description||i("no_description_provided")})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(aE.A,{}),i("technical_requirements")]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:i("backend_conditions")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:p(n.backend_conditions)||i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:i("frontend_conditions")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:p(n.frontend_conditions)||i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:i("ux_requirements")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:p(n.ux_requirements)||i("n_a")})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(m.A,{}),i("deliverables")]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium",children:[i("delivery_method"),":"]})," ",n.delivery_method?i(n.delivery_method):i("n_a")]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium",children:[i("deliverable_location"),":"]})," ",(0,t.jsx)("span",{className:"text-primary break-all",children:p(n.deliverable_location)||i("n_a")})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:i("deliverable_details")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:p(n.deliverable_details)||i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:i("market_research")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground whitespace-pre-wrap",children:p(n.market_research_link)||i("n_a")})]})]})]}),(0,t.jsx)(ah,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,t.jsx)(ag.A,{}),i("financials")]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium",children:i("client_payment")}),(0,t.jsx)("p",{children:n.client_payment?"$".concat(n.client_payment):i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium",children:i("backend_share")}),(0,t.jsx)("p",{children:n.backend_share_pct?"".concat(n.backend_share_pct,"%"):i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium",children:i("frontend_share")}),(0,t.jsx)("p",{children:n.frontend_share_pct?"".concat(n.frontend_share_pct,"%"):i("n_a")})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium",children:i("payment_schedule")}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:n.payment_schedule||i("n_a")})]})]})]})]}),(0,t.jsxs)(ek,{className:"pt-4 border-t",children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>r(!1),children:i("close")}),o&&(0,t.jsxs)(l.$,{onClick:()=>{let e=A[n.status];e&&(d("tasks",n.id,{status:e.nextStatus}),r(!1))},children:[o.icon,o.label]})]})]})})}function ay(e){let{tasks:a}=e,[s,n]=(0,r.useState)(null),[d,c]=(0,r.useState)("all"),[A,o]=(0,r.useState)("all"),{t:p,language:m}=(0,S.o)(),u=(0,r.useMemo)(()=>a.filter(e=>{let a="all"===d||e.status===d,s="all"===A||e.priority===A;return a&&s}),[a,d,A]),x=e=>{switch(e){case"high":return(0,t.jsx)(e$.E,{variant:"destructive",children:p("high")});case"medium":return(0,t.jsx)(e$.E,{variant:"secondary",children:p("medium")});default:return(0,t.jsx)(e$.E,{variant:"outline",children:p("low")})}},B=e=>{switch(e){case"done":return(0,t.jsxs)(e$.E,{children:[(0,t.jsx)(au.A,{className:"mr-1 h-3 w-3"}),p("done")]});case"review":return(0,t.jsx)(e$.E,{variant:"secondary",children:p("review")});case"in_progress":return(0,t.jsx)(e$.E,{variant:"secondary",children:p("in_progress")});default:return(0,t.jsx)(e$.E,{variant:"outline",children:p("backlog")})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(aI,{task:s,isOpen:!!s,onOpenChange:e=>{e||n(null)}}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(i.A,{}),p("my_tasks")]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2 w-full",children:[(0,t.jsx)(ed.J,{htmlFor:"status-filter",children:p("status")}),(0,t.jsxs)(ep,{value:d,onValueChange:c,dir:"ar"===m?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"status-filter",children:(0,t.jsx)(em,{placeholder:p("all")})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:p("all")}),(0,t.jsx)(eb,{value:"backlog",children:p("backlog")}),(0,t.jsx)(eb,{value:"in_progress",children:p("in_progress")}),(0,t.jsx)(eb,{value:"review",children:p("review")}),(0,t.jsx)(eb,{value:"done",children:p("done")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2 w-full",children:[(0,t.jsx)(ed.J,{htmlFor:"priority-filter",children:p("priority")}),(0,t.jsxs)(ep,{value:A,onValueChange:o,dir:"ar"===m?"rtl":"ltr",children:[(0,t.jsx)(eu,{id:"priority-filter",children:(0,t.jsx)(em,{placeholder:p("all")})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:p("all")}),(0,t.jsx)(eb,{value:"low",children:p("low")}),(0,t.jsx)(eb,{value:"medium",children:p("medium")}),(0,t.jsx)(eb,{value:"high",children:p("high")})]})]})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:p("title")}),(0,t.jsx)($,{children:p("status")}),(0,t.jsx)($,{children:p("priority")}),(0,t.jsx)($,{children:p("due_date")}),(0,t.jsx)($,{className:"text-right",children:p("actions")})]})}),(0,t.jsx)(U,{children:u.length>0?u.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:e.title}),(0,t.jsx)(W,{children:B(e.status)}),(0,t.jsx)(W,{children:x(e.priority)}),(0,t.jsx)(W,{children:e.due?new Date(e.due).toLocaleDateString():"N/A"}),(0,t.jsx)(W,{className:"text-right",children:(0,t.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>n(e),children:[(0,t.jsx)(ax.A,{className:"mr-2 h-4 w-4"}),p("view_manage")]})})]},e.id)):(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:5,className:"h-24 text-center",children:p("no_tasks_assigned")})})})]})})]})]})]})}var aH=s(99427),a_=s(73158),aw=s(70154);let ak=aH.bL,aC=aH.l9;aH.YJ,aH.ZL,aH.Pb,aH.z6,r.forwardRef((e,a)=>{let{className:s,inset:r,children:l,...n}=e;return(0,t.jsxs)(aH.ZP,{ref:a,className:(0,H.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n,children:[l,(0,t.jsx)(a_.A,{className:"ml-auto"})]})}).displayName=aH.ZP.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(aH.G5,{ref:a,className:(0,H.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=aH.G5.displayName;let aD=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,t.jsx)(aH.ZL,{children:(0,t.jsx)(aH.UC,{ref:a,sideOffset:r,className:(0,H.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});aD.displayName=aH.UC.displayName;let aF=r.forwardRef((e,a)=>{let{className:s,inset:r,...l}=e;return(0,t.jsx)(aH.q7,{ref:a,className:(0,H.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...l})});function aM(){let{language:e,setLanguage:a}=(0,S.o)();return(0,t.jsxs)(ak,{children:[(0,t.jsx)(aC,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"outline",size:"icon",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:e.toUpperCase()}),(0,t.jsx)("span",{className:"sr-only",children:"Change language"})]})}),(0,t.jsxs)(aD,{align:"end",children:[(0,t.jsx)(aF,{onClick:()=>a("en"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"fi fi-gb"}),(0,t.jsx)("span",{children:"English"})]})}),(0,t.jsx)(aF,{onClick:()=>a("ar"),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"fi fi-sa"}),(0,t.jsx)("span",{children:""})]})})]})]})}aF.displayName=aH.q7.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,checked:l,...n}=e;return(0,t.jsxs)(aH.H_,{ref:a,className:(0,H.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(aH.VF,{children:(0,t.jsx)(eo.A,{className:"h-4 w-4"})})}),r]})}).displayName=aH.H_.displayName,r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(aH.hN,{ref:a,className:(0,H.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(aH.VF,{children:(0,t.jsx)(aw.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=aH.hN.displayName,r.forwardRef((e,a)=>{let{className:s,inset:r,...l}=e;return(0,t.jsx)(aH.JU,{ref:a,className:(0,H.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})}).displayName=aH.JU.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(aH.wv,{ref:a,className:(0,H.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=aH.wv.displayName;var aS=s(51362),aR=s(36936),aJ=s(68027);function aZ(){let{setTheme:e}=(0,aS.D)();return(0,t.jsxs)(ak,{children:[(0,t.jsx)(aC,{asChild:!0,children:(0,t.jsxs)(l.$,{variant:"outline",size:"icon",children:[(0,t.jsx)(aR.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(aJ.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,t.jsxs)(aD,{align:"end",children:[(0,t.jsx)(aF,{onClick:()=>e("light"),children:"Light"}),(0,t.jsx)(aF,{onClick:()=>e("dark"),children:"Dark"}),(0,t.jsx)(aF,{onClick:()=>e("system"),children:"System"})]})]})}var az=s(66634),aL=s(15546);let aP=ef.bL;ef.l9,ef.bm;let aO=ef.ZL,aU=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.hJ,{className:(0,H.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:a})});aU.displayName=ef.hJ.displayName;let aG=(0,es.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),a$=r.forwardRef((e,a)=>{let{side:s="right",className:r,children:l,...n}=e;return(0,t.jsxs)(aO,{children:[(0,t.jsx)(aU,{}),(0,t.jsxs)(ef.UC,{ref:a,className:(0,H.cn)(aG({side:s}),r),...n,children:[l,(0,t.jsxs)(ef.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(ev.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});a$.displayName=ef.UC.displayName;let aW=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.hE,{ref:a,className:(0,H.cn)("text-lg font-semibold text-foreground",s),...r})});function aT(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,H.cn)("animate-pulse rounded-md bg-muted",a),...s})}aW.displayName=ef.hE.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ef.VY,{ref:a,className:(0,H.cn)("text-sm text-muted-foreground",s),...r})}).displayName=ef.VY.displayName;var aV=s(90877);let aq=aV.Kq,aY=aV.bL,aK=aV.l9,aX=r.forwardRef((e,a)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,t.jsx)(aV.UC,{ref:a,sideOffset:r,className:(0,H.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});aX.displayName=aV.UC.displayName;let a0=r.createContext(null);function a2(){let e=r.useContext(a0);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let a1=r.forwardRef((e,a)=>{let{defaultOpen:s=!0,open:l,onOpenChange:n,className:d,style:i,children:c,...A}=e,o=function(){let[e,a]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),s=()=>{a(window.innerWidth<768)};return e.addEventListener("change",s),a(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!e}(),[p,m]=r.useState(!1),[u,x]=r.useState(s),B=null!=l?l:u,h=r.useCallback(e=>{let a="function"==typeof e?e(B):e;n?n(a):x(a),document.cookie="".concat("sidebar_state","=").concat(a,"; path=/; max-age=").concat(604800)},[n,B]),b=r.useCallback(()=>o?m(e=>!e):h(e=>!e),[o,h,m]);r.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b]);let j=B?"expanded":"collapsed",E=r.useMemo(()=>({state:j,open:B,setOpen:h,isMobile:o,openMobile:p,setOpenMobile:m,toggleSidebar:b}),[j,B,h,o,p,m,b]);return(0,t.jsx)(a0.Provider,{value:E,children:(0,t.jsx)(aq,{delayDuration:0,children:(0,t.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...i},className:(0,H.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",d),ref:a,...A,children:c})})})});a1.displayName="SidebarProvider";let a4=r.forwardRef((e,a)=>{let{side:s="left",variant:r="sidebar",collapsible:l="offcanvas",className:n,children:d,...i}=e,{isMobile:c,state:A,openMobile:o,setOpenMobile:p}=a2();return"none"===l?(0,t.jsx)("div",{className:(0,H.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:a,...i,children:d}):c?(0,t.jsx)(aP,{open:o,onOpenChange:p,...i,children:(0,t.jsxs)(a$,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:s,children:[(0,t.jsx)(aW,{className:"sr-only",children:"Sidebar"}),(0,t.jsx)("div",{className:"flex h-full w-full flex-col",children:d})]})}):(0,t.jsxs)("div",{ref:a,className:"group peer hidden md:block text-sidebar-foreground","data-state":A,"data-collapsible":"collapsed"===A?l:"","data-variant":r,"data-side":s,children:[(0,t.jsx)("div",{className:(0,H.cn)("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===r||"inset"===r?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,t.jsx)("div",{className:(0,H.cn)("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===s?"start-0 group-data-[collapsible=offcanvas]:start-[calc(var(--sidebar-width)*-1)]":"end-0 group-data-[collapsible=offcanvas]:end-[calc(var(--sidebar-width)*-1)]","floating"===r||"inset"===r?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-e group-data-[side=right]:border-s",n),...i,children:(0,t.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:d})})]})});a4.displayName="Sidebar";let a5=r.forwardRef((e,a)=>{let{className:s,onClick:r,...n}=e,{toggleSidebar:d}=a2();return(0,t.jsxs)(l.$,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,H.cn)("h-7 w-7",s),onClick:e=>{null==r||r(e),d()},...n,children:[(0,t.jsx)(aL.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});a5.displayName="SidebarTrigger",r.forwardRef((e,a)=>{let{className:s,...r}=e,{toggleSidebar:l}=a2();return(0,t.jsx)("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:l,title:"Toggle Sidebar",className:(0,H.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",s),...r})}).displayName="SidebarRail";let a3=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("main",{ref:a,className:(0,H.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ms-2 md:peer-data-[variant=inset]:ms-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",s),...r})});a3.displayName="SidebarInset",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(eF.p,{ref:a,"data-sidebar":"input",className:(0,H.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",s),...r})}).displayName="SidebarInput";let a6=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"header",className:(0,H.cn)("flex flex-col gap-2 p-2",s),...r})});a6.displayName="SidebarHeader";let a8=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"footer",className:(0,H.cn)("flex flex-col gap-2 p-2",s),...r})});a8.displayName="SidebarFooter";let a7=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(ah,{ref:a,"data-sidebar":"separator",className:(0,H.cn)("mx-2 w-auto bg-sidebar-border",s),...r})});a7.displayName="SidebarSeparator";let a9=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"content",className:(0,H.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...r})});a9.displayName="SidebarContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"group",className:(0,H.cn)("relative flex w-full min-w-0 flex-col p-2",s),...r})}).displayName="SidebarGroup",r.forwardRef((e,a)=>{let{className:s,asChild:r=!1,...l}=e,n=r?az.DX:"div";return(0,t.jsx)(n,{ref:a,"data-sidebar":"group-label",className:(0,H.cn)("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...l})}).displayName="SidebarGroupLabel",r.forwardRef((e,a)=>{let{className:s,asChild:r=!1,...l}=e,n=r?az.DX:"button";return(0,t.jsx)(n,{ref:a,"data-sidebar":"group-action",className:(0,H.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",s),...l})}).displayName="SidebarGroupAction",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"group-content",className:(0,H.cn)("w-full text-sm",s),...r})}).displayName="SidebarGroupContent";let se=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("ul",{ref:a,"data-sidebar":"menu",className:(0,H.cn)("flex w-full min-w-0 flex-col gap-1",s),...r})});se.displayName="SidebarMenu";let sa=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("li",{ref:a,"data-sidebar":"menu-item",className:(0,H.cn)("group/menu-item relative",s),...r})});sa.displayName="SidebarMenuItem";let ss=(0,es.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),st=r.forwardRef((e,a)=>{let{asChild:s=!1,isActive:r=!1,variant:l="default",size:n="default",tooltip:d,className:i,...c}=e,A=s?az.DX:"button",{isMobile:o,state:p}=a2(),m=(0,t.jsx)(A,{ref:a,"data-sidebar":"menu-button","data-size":n,"data-active":r,className:(0,H.cn)(ss({variant:l,size:n}),i),...c});return d?("string"==typeof d&&(d={children:d}),(0,t.jsxs)(aY,{children:[(0,t.jsx)(aK,{asChild:!0,children:m}),(0,t.jsx)(aX,{side:"right",align:"center",hidden:"collapsed"!==p||o,...d})]})):m});st.displayName="SidebarMenuButton",r.forwardRef((e,a)=>{let{className:s,asChild:r=!1,showOnHover:l=!1,...n}=e,d=r?az.DX:"button";return(0,t.jsx)(d,{ref:a,"data-sidebar":"menu-action",className:(0,H.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",l&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",s),...n})}).displayName="SidebarMenuAction",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,"data-sidebar":"menu-badge",className:(0,H.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s),...r})}).displayName="SidebarMenuBadge",r.forwardRef((e,a)=>{let{className:s,showIcon:l=!1,...n}=e,d=r.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,t.jsxs)("div",{ref:a,"data-sidebar":"menu-skeleton",className:(0,H.cn)("rounded-md h-8 flex gap-2 px-2 items-center",s),...n,children:[l&&(0,t.jsx)(aT,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,t.jsx)(aT,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":d}})]})}).displayName="SidebarMenuSkeleton",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("ul",{ref:a,"data-sidebar":"menu-sub",className:(0,H.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",s),...r})}).displayName="SidebarMenuSub",r.forwardRef((e,a)=>{let{...s}=e;return(0,t.jsx)("li",{ref:a,...s})}).displayName="SidebarMenuSubItem",r.forwardRef((e,a)=>{let{asChild:s=!1,size:r="md",isActive:l,className:n,...d}=e,i=s?az.DX:"a";return(0,t.jsx)(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":r,"data-active":l,className:(0,H.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",n),...d})}).displayName="SidebarMenuSubButton";var sr=s(3561),sl=s(18763),sn=s(86318);let sd={name:"",project_name:"",total_payment:0,paid_amount:0,contact_info:"",notes:""};function si(e){let{isOpen:a,onOpenChange:s,client:n}=e,{user:d}=(0,eS.useFirebase)(),{toast:i}=(0,eJ.dj)(),{addDoc:c,updateDoc:A}=eL(),{t:o,language:p}=(0,S.o)(),[m,u]=(0,r.useState)(sd);(0,r.useEffect)(()=>{a&&(n?u(n):u(sd))},[a,n]);let x=(e,a)=>{u(s=>({...s,[e]:a}))},B=async()=>{if(!d)return void i({variant:"destructive",title:"Error",description:o("must_be_logged_in_to_create_course")});if(!m.name||!m.project_name)return void i({variant:"destructive",title:"Error",description:o("client_and_project_name_required")});let e={...m,createdBy:d.uid};n?A("clients",n.id,e):c("clients",e),u(sd),s(!1)};return(0,t.jsx)(eN,{open:a,onOpenChange:s,children:(0,t.jsxs)(e_,{className:"sm:max-w-md",dir:"ar"===p?"rtl":"ltr",children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:n?o("edit_client"):o("add_client")}),(0,t.jsx)(eD,{children:o("client_form_desc")})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"name",children:o("client_name")}),(0,t.jsx)(eF.p,{id:"name",value:m.name,onChange:e=>x("name",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"project_name",children:o("project_name")}),(0,t.jsx)(eF.p,{id:"project_name",value:m.project_name,onChange:e=>x("project_name",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"total_payment",children:o("total_payment")}),(0,t.jsx)(eF.p,{id:"total_payment",type:"number",value:m.total_payment||"",onChange:e=>x("total_payment",parseFloat(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"paid_amount",children:o("paid_amount")}),(0,t.jsx)(eF.p,{id:"paid_amount",type:"number",value:m.paid_amount||"",onChange:e=>x("paid_amount",parseFloat(e.target.value)||0)})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"contact_info",children:o("contact_info")}),(0,t.jsx)(eF.p,{id:"contact_info",value:m.contact_info||"",onChange:e=>x("contact_info",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"notes",children:o("notes")}),(0,t.jsx)(eM,{id:"notes",value:m.notes||"",onChange:e=>x("notes",e.target.value)})]})]}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>s(!1),children:o("cancel")}),(0,t.jsx)(l.$,{onClick:B,children:n?o("save_changes"):o("add_client")})]})]})})}function sc(){let{firestore:e,user:a}=(0,eS.useFirebase)(),s=(0,eS.useMemoFirebase)(()=>e?(0,eR.P)((0,eR.rJ)(e,"clients")):null,[e]),{data:t,isLoading:r}=(0,eS.useCollection)(s);return r||!t?[]:t}var sA=s(57120);let so=sA.bL,sp=sA.l9,sm=sA.ZL,su=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sA.hJ,{className:(0,H.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:a})});su.displayName=sA.hJ.displayName;let sx=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)(sm,{children:[(0,t.jsx)(su,{}),(0,t.jsx)(sA.UC,{ref:a,className:(0,H.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});sx.displayName=sA.UC.displayName;let sB=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,H.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};sB.displayName="AlertDialogHeader";let sh=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,H.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};sh.displayName="AlertDialogFooter";let sb=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sA.hE,{ref:a,className:(0,H.cn)("text-lg font-semibold",s),...r})});sb.displayName=sA.hE.displayName;let sj=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sA.VY,{ref:a,className:(0,H.cn)("text-sm text-muted-foreground",s),...r})});sj.displayName=sA.VY.displayName;let sE=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sA.rc,{ref:a,className:(0,H.cn)((0,l.r)(),s),...r})});sE.displayName=sA.rc.displayName;let sg=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sA.ZD,{ref:a,className:(0,H.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});function sQ(){let{t:e}=(0,S.o)(),[a,s]=(0,r.useState)(!1),[n,d]=(0,r.useState)(void 0),i=sc(),{updateDoc:c,deleteDoc:A}=eL(),{toast:o}=(0,eJ.dj)(),[p,m]=(0,r.useState)(null),x=e=>{d(e),s(!0)},B=e=>{A("clients",e)},h=e=>{let a=e.publicToken||crypto.randomUUID(),s="".concat(window.location.origin,"/client-portal/").concat(a);e.publicToken||c("clients",e.id,{publicToken:a}),m(s)},E=(e,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format((e||0)-(a||0));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(si,{isOpen:a,onOpenChange:s,client:n}),(0,t.jsx)(so,{open:!!p,onOpenChange:()=>m(null),children:(0,t.jsxs)(sx,{children:[(0,t.jsxs)(sB,{children:[(0,t.jsx)(sb,{children:"Client Portal Link"}),(0,t.jsx)(sj,{children:"Share this secure link with your client for them to view project progress."})]}),(0,t.jsx)(eF.p,{readOnly:!0,value:p||"",className:"my-4",onFocus:e=>e.target.select()}),(0,t.jsxs)(sh,{children:[(0,t.jsx)(l.$,{onClick:()=>{p&&(navigator.clipboard.writeText(p),o({title:"Copied!",description:"Link copied to clipboard."}))},children:"Copy Link"}),(0,t.jsx)(sE,{onClick:()=>m(null),children:"Close"})]})]})}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(u.A,{}),e("manage_clients")]}),(0,t.jsxs)(l.$,{onClick:()=>{d(void 0),s(!0)},children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),e("add_client")]})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:e("client_name")}),(0,t.jsx)($,{children:e("project_name")}),(0,t.jsx)($,{children:e("total_payment")}),(0,t.jsx)($,{children:e("paid_amount")}),(0,t.jsx)($,{children:e("balance")}),(0,t.jsx)($,{className:"text-right",children:e("actions")})]})}),(0,t.jsx)(U,{children:i&&i.length>0?i.map(a=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:a.name}),(0,t.jsx)(W,{children:a.project_name}),(0,t.jsx)(W,{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.total_payment||0)}),(0,t.jsx)(W,{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a.paid_amount||0)}),(0,t.jsx)(W,{children:E(a.total_payment,a.paid_amount)}),(0,t.jsx)(W,{className:"text-right",children:(0,t.jsxs)(ak,{children:[(0,t.jsx)(aC,{asChild:!0,children:(0,t.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(sr.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(aD,{children:[(0,t.jsxs)(aF,{onClick:()=>x(a),children:[(0,t.jsx)(sl.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:e("edit")})]}),(0,t.jsxs)(aF,{onClick:()=>h(a),children:[(0,t.jsx)(sn.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Client Portal"})]}),(0,t.jsxs)(aF,{onClick:()=>B(a.id),className:"text-destructive",children:[(0,t.jsx)(eY.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:e("delete")})]})]})]})})]},a.id)):(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:6,className:"h-24 text-center",children:e("no_clients_found")})})})]})})})]})]})}sg.displayName=sA.ZD.displayName;var sf=s(77740),sv=s(75074);let sN=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sf.uB,{ref:a,className:(0,H.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r})});sN.displayName=sf.uB.displayName;let sI=e=>{let{children:a,...s}=e;return(0,t.jsx)(eN,{...s,children:(0,t.jsx)(e_,{className:"overflow-hidden p-0 shadow-lg",children:(0,t.jsx)(sN,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:a})})})},sy=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,t.jsx)(sv.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(sf.uB.Input,{ref:a,className:(0,H.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]})});sy.displayName=sf.uB.Input.displayName;let sH=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sf.uB.List,{ref:a,className:(0,H.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r})});sH.displayName=sf.uB.List.displayName;let s_=r.forwardRef((e,a)=>(0,t.jsx)(sf.uB.Empty,{ref:a,className:"py-6 text-center text-sm",...e}));s_.displayName=sf.uB.Empty.displayName;let sw=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sf.uB.Group,{ref:a,className:(0,H.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});sw.displayName=sf.uB.Group.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sf.uB.Separator,{ref:a,className:(0,H.cn)("-mx-1 h-px bg-border",s),...r})}).displayName=sf.uB.Separator.displayName;let sk=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sf.uB.Item,{ref:a,className:(0,H.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s),...r})});function sC(e){let{onAction:a}=e,[s,l]=(0,r.useState)(!1),{t:n}=(0,S.o)();(0,r.useEffect)(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),l(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let d=(e,s)=>{l(!1),a(e,s)};return(0,t.jsxs)(sI,{open:s,onOpenChange:l,children:[(0,t.jsx)(sy,{placeholder:n("type_command_or_search")}),(0,t.jsxs)(sH,{children:[(0,t.jsx)(s_,{children:n("no_results_found")}),(0,t.jsxs)(sw,{heading:n("actions"),children:[(0,t.jsxs)(sk,{onSelect:()=>d("new-task"),children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),n("create_new_task")]}),(0,t.jsxs)(sk,{onSelect:()=>d("new-client"),children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),n("create_new_client")]}),(0,t.jsxs)(sk,{onSelect:()=>d("export-pdf"),children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),n("export_to_pdf")]})]}),(0,t.jsxs)(sw,{heading:n("navigation"),children:[(0,t.jsxs)(sk,{onSelect:()=>d("navigate","dashboard"),children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),n("dashboard")]}),(0,t.jsxs)(sk,{onSelect:()=>d("navigate","my-tasks"),children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),n("my_tasks")]}),(0,t.jsxs)(sk,{onSelect:()=>d("navigate","reports"),children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),n("reports")]}),(0,t.jsxs)(sk,{onSelect:()=>d("navigate","clients"),children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),n("clients")]})]}),(0,t.jsxs)(sw,{heading:n("filters"),children:[(0,t.jsxs)(sk,{onSelect:()=>d("filter","my-tasks"),children:[(0,t.jsx)(sv.A,{className:"mr-2 h-4 w-4"}),n("show_my_tasks")]}),(0,t.jsxs)(sk,{onSelect:()=>d("filter","urgent"),children:[(0,t.jsx)(sv.A,{className:"mr-2 h-4 w-4"}),n("show_urgent")]}),(0,t.jsxs)(sk,{onSelect:()=>d("filter","blocked"),children:[(0,t.jsx)(sv.A,{className:"mr-2 h-4 w-4"}),n("show_blocked")]})]})]})]})}sk.displayName=sf.uB.Item.displayName;var sD=s(18553),sF=s(80659);function sM(e){let{tasks:a,users:s}=e,{t:r}=(0,S.o)(),l=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=new Date,r=new Date(t.getTime()+24*s*36e5),l=a.filter(a=>{var s;if(!(null==(s=a.assigned_to)?void 0:s.includes(e))||"done"===a.status)return!1;if(a.due_date){let e=new Date(a.due_date);return e>=t&&e<=r}return"in_progress"===a.status});return{count:l.length,highPriority:l.filter(e=>"high"===e.priority).length,blocked:l.filter(e=>e.blocked_by&&e.blocked_by.length>0).length}},n=e=>0===e?"bg-gray-100 dark:bg-gray-800 text-gray-600":e<=2?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":e<=4?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":e<=6?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",d=e=>0===e?r("idle"):e<=2?r("light"):e<=4?r("moderate"):e<=6?r("busy"):r("overloaded");return(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(sD.A,{className:"h-5 w-5"}),r("workload_heatmap")]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r("next_7_days")})]}),(0,t.jsxs)(j.Wu,{children:[(0,t.jsx)("div",{className:"space-y-4",children:s.map(e=>{let a=l(e.id),s=l(e.id,7),i=l(e.id,14);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a.highPriority>0&&(0,t.jsxs)(e$.E,{variant:"destructive",className:"text-xs",children:[a.highPriority," ",r("high_priority")]}),a.blocked>0&&(0,t.jsxs)(e$.E,{variant:"outline",className:"text-xs",children:[a.blocked," ",r("blocked")]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(n(s.count)),children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:s.count}),(0,t.jsxs)("div",{className:"text-xs opacity-80",children:[r("next")," 7 ",r("days")]}),(0,t.jsx)("div",{className:"text-xs font-medium mt-1",children:d(s.count)})]}),(0,t.jsxs)("div",{className:"p-3 rounded-lg text-center ".concat(n(i.count)),children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:i.count}),(0,t.jsxs)("div",{className:"text-xs opacity-80",children:[r("next")," 14 ",r("days")]}),(0,t.jsx)("div",{className:"text-xs font-medium mt-1",children:d(i.count)})]})]}),s.count>6&&(0,t.jsxs)("div",{className:"flex items-start gap-2 p-2 bg-orange-50 dark:bg-orange-900/10 border border-orange-200 dark:border-orange-800 rounded text-xs",children:[(0,t.jsx)(sF.A,{className:"h-4 w-4 text-orange-600 mt-0.5"}),(0,t.jsx)("span",{className:"text-orange-700 dark:text-orange-400",children:r("consider_redistributing_tasks")})]})]},e.id)})}),(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,t.jsxs)("p",{className:"text-xs font-medium mb-2",children:[r("workload_levels"),":"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:[{range:"0",label:r("idle"),color:"bg-gray-100 dark:bg-gray-800"},{range:"1-2",label:r("light"),color:"bg-green-100 dark:bg-green-900/30"},{range:"3-4",label:r("moderate"),color:"bg-yellow-100 dark:bg-yellow-900/30"},{range:"5-6",label:r("busy"),color:"bg-orange-100 dark:bg-orange-900/30"},{range:"7+",label:r("overloaded"),color:"bg-red-100 dark:bg-red-900/30"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded ".concat(e.color)}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.range,": ",e.label]})]},e.range))})]})]})]})}var sS=s(11133),sR=s(24944);function sJ(e){let{tasks:a,clients:s}=e,{t:r}=(0,S.o)(),n=(()=>{let e={totalRevenue:0,paidAmount:0,pendingAmount:0,overdueAmount:0};return s.forEach(a=>{e.totalRevenue+=a.total_payment||0,e.paidAmount+=a.paid_amount||0}),e.pendingAmount=e.totalRevenue-e.paidAmount,a.forEach(a=>{if("done"===a.status&&"paid"!==a.payment_status&&a.client_payment){let t=s.find(e=>e.id===a.client_id);t&&(t.paid_amount,t.total_payment&&t.paid_amount<t.total_payment&&(e.overdueAmount+=a.client_payment))}}),e})(),d=n.totalRevenue>0?n.paidAmount/n.totalRevenue*100:0,i=e=>e.client_payment?{backendAmount:(e.backend_share_pct||0)/100*e.client_payment,frontendAmount:(e.frontend_share_pct||0)/100*e.client_payment}:null;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:r("total_revenue")}),(0,t.jsx)(ag.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["$",n.totalRevenue.toLocaleString()]})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:r("paid")}),(0,t.jsx)(ag.A,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",n.paidAmount.toLocaleString()]})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:r("pending")}),(0,t.jsx)(ag.A,{className:"h-4 w-4 text-orange-600"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:["$",n.pendingAmount.toLocaleString()]})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsxs)(j.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(j.ZB,{className:"text-sm font-medium",children:r("overdue")}),(0,t.jsx)(sS.A,{className:"h-4 w-4 text-destructive"})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold text-destructive",children:["$",n.overdueAmount.toLocaleString()]})})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(j.ZB,{children:r("payment_progress")}),(0,t.jsxs)(l.$,{onClick:()=>{let e=new Blob([["Task,Client,Amount,Backend Share,Frontend Share,Status,Due Date",...a.filter(e=>e.client_payment).map(e=>{let a=i(e),t=s.find(a=>a.id===e.client_id);return[e.title,(null==t?void 0:t.name)||"N/A",e.client_payment,(null==a?void 0:a.backendAmount)||0,(null==a?void 0:a.frontendAmount)||0,e.payment_status||"pending",e.due_date||"N/A"].join(",")})].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="payment-report-".concat(new Date().toISOString().split("T")[0],".csv"),r.click()},variant:"outline",size:"sm",children:[(0,t.jsx)(al.A,{className:"h-4 w-4 mr-2"}),r("export")]})]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[(0,t.jsx)(sR.k,{value:d,className:"h-4"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[d.toFixed(1),"% of total revenue collected"]})]})]})]})}var sZ=s(82733),sz=s(25844),sL=s(15300);let sP={backend:aE.A,frontend:sZ.A,fullstack:sz.A,design:sZ.A,other:sL.A};function sO(e){let{templates:a,onSelectTemplate:s}=e,{t:r}=(0,S.o)(),n=[{id:"backend-api",name:"Backend API",description:"API endpoint development with Swagger docs and testing",type:"work",category:"backend",defaultFields:{backend_conditions:"Swagger documentation\nUnit tests\nError handling\nRate limiting",tags:["api","backend"]},defaultChecklist:[{title:"Define API endpoints and methods",done:!1},{title:"Create Swagger/OpenAPI documentation",done:!1},{title:"Implement endpoints",done:!1},{title:"Add input validation",done:!1},{title:"Write unit tests",done:!1},{title:"Test with Postman/Insomnia",done:!1}],createdBy:"system",createdAt:new Date},{id:"frontend-page",name:"Frontend Page",description:"New page/component with responsive design",type:"work",category:"frontend",defaultFields:{frontend_conditions:"Responsive design\nAccessibility (WCAG)\nLoading states\nError handling",ux_requirements:"Mobile-first approach\nClean UI\nFast loading",tags:["frontend","ui"]},defaultChecklist:[{title:"Design mockup review",done:!1},{title:"Create component structure",done:!1},{title:"Implement responsive layout",done:!1},{title:"Add loading/error states",done:!1},{title:"Accessibility testing",done:!1},{title:"Cross-browser testing",done:!1}],createdBy:"system",createdAt:new Date},{id:"fullstack-feature",name:"Full-Stack Feature",description:"Complete feature with backend and frontend",type:"work",category:"fullstack",defaultFields:{backend_conditions:"API endpoints\nDatabase schema\nBusiness logic",frontend_conditions:"UI components\nState management\nAPI integration",tags:["fullstack","feature"]},defaultChecklist:[{title:"Define requirements",done:!1},{title:"Design database schema",done:!1},{title:"Create API endpoints",done:!1},{title:"Implement frontend UI",done:!1},{title:"Integrate frontend with API",done:!1},{title:"End-to-end testing",done:!1}],createdBy:"system",createdAt:new Date}],d=a.length>0?a:n;return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>{let a=sP[e.category];return(0,t.jsxs)(j.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[(0,t.jsxs)(j.aR,{children:[(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsx)(a,{className:"h-8 w-8 text-primary"})}),(0,t.jsx)(j.ZB,{className:"mt-2",children:e.name}),(0,t.jsx)(j.BT,{children:e.description})]}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(l.$,{onClick:()=>s(e),variant:"secondary",className:"w-full",children:r("use_template")})})]},e.id)})})}var sU=s(73672),sG=s(85977);let s$=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sG.bL,{ref:a,className:(0,H.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});s$.displayName=sG.bL.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sG._V,{ref:a,className:(0,H.cn)("aspect-square h-full w-full",s),...r})}).displayName=sG._V.displayName;let sW=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(sG.H4,{ref:a,className:(0,H.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});sW.displayName=sG.H4.displayName;var sT=s(52780);function sV(){let{firestore:e,user:a}=(0,eS.useFirebase)(),{addDoc:s}=eL(),{t:n}=(0,S.o)(),[d,i]=(0,r.useState)(""),A=(0,eS.useMemoFirebase)(()=>e?(0,eR.P)((0,eR.rJ)(e,"chat"),(0,eR.My)("timestamp","asc"),(0,eR.AB)(50)):null,[e]),{data:o,isLoading:p}=(0,eS.useCollection)(A),m=()=>{e&&a&&d.trim()&&(s("chat",{userId:a.uid,userName:a.displayName||a.email,text:d,timestamp:(0,eR.O5)()}),i(""))};return(0,t.jsxs)(j.Zp,{className:"h-[70vh] flex flex-col",children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(c.A,{}),n("team_chat")]})}),(0,t.jsxs)(j.Wu,{className:"flex-grow flex flex-col gap-4 overflow-hidden",children:[(0,t.jsx)(eU,{className:"flex-grow pr-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[p&&(0,t.jsxs)("p",{children:[n("loading"),"..."]}),null==o?void 0:o.map(e=>{var s,r;return(0,t.jsxs)("div",{className:"flex items-start gap-3 ".concat(e.userId===(null==a?void 0:a.uid)?"justify-end":""),children:[e.userId!==(null==a?void 0:a.uid)&&(0,t.jsx)(s$,{className:"h-8 w-8",children:(0,t.jsx)(sW,{children:null==(s=e.userName)?void 0:s.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"rounded-lg p-3 max-w-xs ".concat(e.userId===(null==a?void 0:a.uid)?"bg-primary text-primary-foreground":"bg-muted"),children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.userName}),(0,t.jsx)("p",{className:"text-sm",children:e.text}),(0,t.jsx)("p",{className:"text-xs text-right opacity-70 mt-1",children:e.timestamp&&(0,sT.m)(e.timestamp.toDate(),{addSuffix:!0})})]}),e.userId===(null==a?void 0:a.uid)&&(0,t.jsx)(s$,{className:"h-8 w-8",children:(0,t.jsx)(sW,{children:null==(r=e.userName)?void 0:r.charAt(0).toUpperCase()})})]},e.id)})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(eF.p,{value:d,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"===e.key&&m()},placeholder:n("type_message")}),(0,t.jsx)(l.$,{onClick:m,disabled:!d.trim(),children:(0,t.jsx)(sU.A,{className:"h-4 w-4"})})]})]})]})}var sq=s(24386);function sY(e){let{userRole:a}=e,{firestore:s,user:n}=(0,eS.useFirebase)(),{addDoc:d,updateDoc:i}=eL(),{t:o,language:p}=(0,S.o)(),{toast:m}=(0,eJ.dj)(),u=eP(a),[x,B]=(0,r.useState)(!1),[h,E]=(0,r.useState)("all"),[g,Q]=(0,r.useState)({type:"annual",startDate:"",endDate:"",reason:""}),[f,v]=(0,r.useState)({action:null,leaveId:null}),N=(0,eS.useMemoFirebase)(()=>s&&n?(0,eR.H9)(s,"users",n.uid):null,[s,n]),{data:I}=(0,eS.useDoc)(N),y=(null==I?void 0:I.role)==="admin",H=(0,eS.useMemoFirebase)(()=>s&&n?(0,eR.P)((0,eR.rJ)(s,"leaves"),(0,eR.My)("createdAt","desc")):null,[s,n]),{data:_}=(0,eS.useCollection)(H),w=_||[],k=(0,r.useMemo)(()=>{let e=w;return y||(e=e.filter(e=>e.userId===(null==n?void 0:n.uid))),y&&"all"!==h&&(e=e.filter(e=>e.userId===h)),e},[w,y,n,h]),C=(0,eS.useMemoFirebase)(()=>s&&y?(0,eR.P)((0,eR.rJ)(s,"chat"),(0,eR.My)("timestamp","desc")):null,[s,y]),{data:D}=(0,eS.useCollection)(C),F=D||[];(0,r.useEffect)(()=>{if(!y||!F||!u||!s)return;let e=new Set(w.filter(e=>e.extractedFromChatMessageId).map(e=>e.extractedFromChatMessageId));F.forEach(a=>{var s,t;if(!a.id||!a.text||!a.userId||e.has(a.id))return;let r=u.find(e=>e.id===a.userId);if(!r||"admin"!==r.role)return;let l=(null==(s=a.text)?void 0:s.toLowerCase())||"";for(let s of[/([^\s]+(?:\s+[^\s]+)?)\s+(?:||||wants?|needs?|requested?)\s+(?:.*?)(?:|||leave)/gi,/(?:|||leave)\s+(?:||for)\s+([^\s]+(?:\s+[^\s]+)?)/gi])for(let r of[...l.matchAll(s)]){let s=null==(t=r[1])?void 0:t.trim();if(!s)continue;let n=u.find(e=>{var a;let t=(null==(a=e.fullName)?void 0:a.toLowerCase())||"",r=s.toLowerCase();return t.includes(r)||t.split(/\s+/).some(e=>e.startsWith(r))||r.split(/\s+/).some(e=>t.includes(e)&&e.length>2)});if(n){let s=new Date,t=new Date,r="".concat(o("auto_extracted_from_chat"),': "').concat(a.text.substring(0,100),'"');l.includes("")||l.includes("tomorrow")?(s.setDate(s.getDate()+1),t.setDate(t.getDate()+1)):(l.includes(" ")||l.includes("next week"))&&(s.setDate(s.getDate()+7),t.setDate(t.getDate()+7));let i=(0,sq.c)(t,s)+1;try{d("leaves",{userId:n.id,userName:n.fullName,type:"annual",startDate:eR.Dc.fromDate(s),endDate:eR.Dc.fromDate(t),days:i,reason:r,status:"pending",createdAt:(0,eR.O5)(),extractedFromChatMessageId:a.id}),e.add(a.id);return}catch(e){console.error("Error creating auto-leave:",e)}}}})},[F,u,y,w,s,d,o]);let M=async()=>{if(!s||!n||!g.startDate||!g.endDate)return void m({variant:"destructive",title:o("error_title"),description:"Please fill all required fields"});let e=new Date(g.startDate),a=new Date(g.endDate),t=(0,sq.c)(a,e)+1;if(t<=0)return void m({variant:"destructive",title:o("error_title"),description:"End date must be after start date"});let r=null==u?void 0:u.find(e=>e.id===n.uid);try{await d("leaves",{userId:n.uid,userName:(null==r?void 0:r.fullName)||n.email,type:g.type,startDate:eR.Dc.fromDate(e),endDate:eR.Dc.fromDate(a),days:t,reason:g.reason,status:"pending",createdAt:(0,eR.O5)()}),m({title:o("leave_request_submitted_title"),description:o("leave_request_submitted_desc")}),B(!1),Q({type:"annual",startDate:"",endDate:"",reason:""})}catch(e){console.error("Error submitting leave:",e),m({variant:"destructive",title:o("error_title"),description:o("error_desc")})}},R=e=>{switch(e){case"approved":return(0,t.jsxs)(e$.E,{className:"bg-green-500",children:[(0,t.jsx)(eo.A,{className:"w-3 h-3 mr-1"})," ",o("approved")]});case"rejected":return(0,t.jsxs)(e$.E,{variant:"destructive",children:[(0,t.jsx)(ev.A,{className:"w-3 h-3 mr-1"})," ",o("rejected")]});case"pending":return(0,t.jsxs)(e$.E,{variant:"secondary",children:[(0,t.jsx)(A.A,{className:"w-3 h-3 mr-1"})," ",o("pending")]})}},J=e=>({sick:o("sick_leave"),annual:o("annual_leave"),unpaid:o("unpaid_leave"),emergency:o("emergency_leave"),other:o("other")})[e]||e,Z=(0,r.useMemo)(()=>w.filter(e=>e.extractedFromChatMessageId).length,[w]),z=(0,r.useMemo)(()=>{let e=k.filter(e=>"approved"===e.status),a=k.filter(e=>"pending"===e.status),s=e.reduce((e,a)=>e+a.days,0);return{approved:e.length,pending:a.length,totalDays:s}},[k]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(ar.A,{className:"w-5 h-5"}),o("leave_management"),y&&Z>0&&(0,t.jsxs)(e$.E,{variant:"secondary",className:"ml-2",children:[(0,t.jsx)(c.A,{className:"w-3 h-3 mr-1"}),Z," ",o("from_chat")]})]}),(0,t.jsxs)(l.$,{onClick:()=>B(!0),children:[(0,t.jsx)(b.A,{className:"w-4 h-4 mr-2"}),o("request_leave")]})]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:o("approved_leaves")}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.approved})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:o("pending_requests")}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.pending})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:o("total_leave_days")}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:z.totalDays})]})]}),y&&u&&u.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(ed.J,{htmlFor:"user-filter",className:"whitespace-nowrap",children:[o("filter_by_employee"),":"]}),(0,t.jsxs)(ep,{value:h,onValueChange:E,children:[(0,t.jsx)(eu,{id:"user-filter",className:"w-[250px]",children:(0,t.jsx)(em,{placeholder:o("all_employees")})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:o("all_employees")}),u.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName||e.email||o("unknown_user")},e.id))]})]}),"all"!==h&&(0,t.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>E("all"),children:o("clear_filter")})]}),y&&(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg flex items-start gap-3",children:[(0,t.jsx)(sS.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:o("auto_extraction_enabled")}),(0,t.jsx)("p",{className:"text-blue-700 dark:text-blue-300",children:o("auto_extraction_desc_leaves")})]})]}),(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[y&&(0,t.jsx)($,{children:o("employee")}),(0,t.jsx)($,{children:o("leave_type")}),(0,t.jsx)($,{children:o("start_date")}),(0,t.jsx)($,{children:o("end_date")}),(0,t.jsx)($,{children:o("days")}),(0,t.jsx)($,{children:o("reason")}),(0,t.jsx)($,{children:o("status")}),y&&(0,t.jsx)($,{children:o("source")}),y&&(0,t.jsx)($,{children:o("actions")})]})}),(0,t.jsx)(U,{children:0===k.length?(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:y?9:7,className:"text-center text-muted-foreground",children:o("no_leave_requests")})}):k.map(e=>(0,t.jsxs)(G,{children:[y&&(0,t.jsx)(W,{className:"font-medium",children:e.userName}),(0,t.jsx)(W,{children:J(e.type)}),(0,t.jsx)(W,{children:(0,as.GP)(e.startDate.toDate(),"MMM dd, yyyy")}),(0,t.jsx)(W,{children:(0,as.GP)(e.endDate.toDate(),"MMM dd, yyyy")}),(0,t.jsx)(W,{children:e.days}),(0,t.jsx)(W,{className:"max-w-xs truncate",children:e.reason||"-"}),(0,t.jsx)(W,{children:R(e.status)}),y&&(0,t.jsx)(W,{children:e.extractedFromChatMessageId?(0,t.jsxs)(e$.E,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(c.A,{className:"w-3 h-3 mr-1"}),o("chat")]}):(0,t.jsx)(e$.E,{variant:"outline",className:"text-xs",children:o("manual")})}),y&&(0,t.jsx)(W,{children:"pending"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(sp,{asChild:!0,children:(0,t.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>v({action:"approve",leaveId:e.id}),children:(0,t.jsx)(eo.A,{className:"w-4 h-4"})})}),(0,t.jsx)(sp,{asChild:!0,children:(0,t.jsx)(l.$,{size:"sm",variant:"destructive",onClick:()=>v({action:"reject",leaveId:e.id}),children:(0,t.jsx)(ev.A,{className:"w-4 h-4"})})})]})})]},e.id))})]})})]})]}),(0,t.jsxs)(sx,{children:[(0,t.jsxs)(sB,{children:[(0,t.jsx)(sb,{children:o("are_you_sure")}),(0,t.jsx)(sj,{children:o("leave_action_confirm_desc",{action:o(f.action||"")})})]}),(0,t.jsxs)(sh,{children:[(0,t.jsx)(sg,{onClick:()=>v({action:null,leaveId:null}),children:o("cancel")}),(0,t.jsx)(sE,{onClick:()=>{let{action:e,leaveId:a}=f;if(!a||!n)return;let s=w.find(e=>e.id===a);if(!s)return;let t="approve"===e?"".concat(o("leave_approved_for")," @").concat(s.userName):"".concat(o("leave_rejected_for")," @").concat(s.userName);i("leaves",a,{status:"approve"===e?"approved":"rejected",approvedBy:n.uid,approvedAt:(0,eR.O5)()}),d("chat",{userId:n.uid,userName:n.displayName,text:t,timestamp:(0,eR.O5)()}),"approve"===e?m({title:o("leave_approved_title"),description:o("leave_approved_desc")}):"reject"===e&&m({title:o("leave_rejected_title"),description:o("leave_rejected_desc")}),v({action:null,leaveId:null})},children:o("confirm")})]})]}),(0,t.jsx)(eN,{open:x,onOpenChange:B,children:(0,t.jsxs)(e_,{children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:o("request_leave")}),(0,t.jsx)(eD,{children:o("submit_leave_request_desc")})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"type",children:o("leave_type")}),(0,t.jsxs)(ep,{value:g.type,onValueChange:e=>Q({...g,type:e}),children:[(0,t.jsx)(eu,{id:"type",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"annual",children:o("annual_leave")}),(0,t.jsx)(eb,{value:"sick",children:o("sick_leave")}),(0,t.jsx)(eb,{value:"emergency",children:o("emergency_leave")}),(0,t.jsx)(eb,{value:"unpaid",children:o("unpaid_leave")}),(0,t.jsx)(eb,{value:"other",children:o("other")})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"startDate",children:o("start_date")}),(0,t.jsx)(eF.p,{id:"startDate",type:"date",value:g.startDate,onChange:e=>Q({...g,startDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"endDate",children:o("end_date")}),(0,t.jsx)(eF.p,{id:"endDate",type:"date",value:g.endDate,onChange:e=>Q({...g,endDate:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"reason",children:o("reason")}),(0,t.jsx)(eM,{id:"reason",value:g.reason,onChange:e=>Q({...g,reason:e.target.value}),placeholder:o("leave_reason_placeholder")})]}),g.startDate&&g.endDate&&(0,sq.c)(new Date(g.endDate),new Date(g.startDate))+1>0&&(0,t.jsx)("div",{className:"bg-muted p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm",children:[o("total_days"),": ",(0,t.jsx)("span",{className:"font-bold",children:(0,sq.c)(new Date(g.endDate),new Date(g.startDate))+1})]})})]}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>B(!1),children:o("cancel")}),(0,t.jsx)(l.$,{onClick:M,children:o("submit_request")})]})]})})]})}var sK=s(98328),sX=s(77070),s0=s(7860),s2=s(9208);function s1(e){let{userRole:a}=e,{firestore:s,user:l}=(0,eS.useFirebase)(),n=eP(a),{t:d}=(0,S.o)(),i="admin"===a,[c,o]=(0,r.useState)(null),[p,m]=(0,r.useState)("all");(0,r.useEffect)(()=>{o((0,as.GP)(new Date,"yyyy-MM"))},[]);let u=(0,r.useMemo)(()=>c?(0,ad.w)(new Date(c)):new Date,[c]),x=(0,r.useMemo)(()=>c?(0,ai.p)(new Date(c)):new Date,[c]),B=(0,eS.useMemoFirebase)(()=>s&&l&&c?i?(0,eR.P)((0,eR.rJ)(s,"attendance"),(0,eR._M)("clockIn",">=",u),(0,eR._M)("clockIn","<=",x),(0,eR.My)("clockIn","desc")):(0,eR.P)((0,eR.rJ)(s,"attendance"),(0,eR._M)("userId","==",l.uid),(0,eR._M)("clockIn",">=",u),(0,eR._M)("clockIn","<=",x),(0,eR.My)("clockIn","desc")):null,[s,l,i,u,x,c]),{data:h}=(0,eS.useCollection)(B),b=h||[],E=(0,r.useMemo)(()=>{if(!n||0===n.length||!c)return[];let e=i?n:n.filter(e=>e.id===(null==l?void 0:l.uid)),a=(0,s0.k)({start:u,end:x}).filter(e=>{let a=e.getDay();return 5!==a&&6!==a});return e.filter(e=>!i||"all"===p||e.id===p).map(e=>{let s=b.filter(a=>a.userId===e.id),t=new Set(s.map(e=>(0,as.GP)(e.clockIn.toDate(),"yyyy-MM-dd"))).size,r=s.reduce((e,a)=>{if(a.clockOut){let s=a.clockIn.toDate(),t=a.clockOut.toDate();return e+(0,s2.o)(t,s)/60}return e},0),l=s.filter(e=>{let a=e.clockIn.toDate(),s=a.getHours(),t=a.getMinutes();return s>9||9===s&&t>30}).length,n=a.length-t;return{userId:e.id,userName:e.fullName||d("unknown_user"),totalDays:a.length,presentDays:t,absentDays:n,lateDays:l,totalHours:Math.round(10*r)/10,attendanceRate:a.length>0?Math.round(t/a.length*100):0}})},[n,b,i,l,u,x,p,d,c]),g=e=>e>=95?(0,t.jsx)(e$.E,{className:"bg-green-500",children:d("excellent")}):e>=85?(0,t.jsx)(e$.E,{className:"bg-blue-500",children:d("good")}):e>=75?(0,t.jsx)(e$.E,{className:"bg-yellow-500",children:d("fair")}):(0,t.jsx)(e$.E,{variant:"destructive",children:d("poor")}),Q=(0,r.useMemo)(()=>{if(0===E.length)return null;let e=E.reduce((e,a)=>e+a.attendanceRate,0)/E.length;return{totalPresent:E.reduce((e,a)=>e+a.presentDays,0),totalAbsent:E.reduce((e,a)=>e+a.absentDays,0),totalLate:E.reduce((e,a)=>e+a.lateDays,0),totalHours:E.reduce((e,a)=>e+a.totalHours,0),avgAttendanceRate:isNaN(e)?0:Math.round(e)}},[E]);return c?(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(sK.A,{className:"w-5 h-5"}),d("attendance_summary")]}),(0,t.jsxs)(ep,{value:c,onValueChange:o,children:[(0,t.jsx)(eu,{className:"w-[180px]",children:(0,t.jsx)(em,{})}),(0,t.jsx)(eh,{children:Array.from({length:12},(e,a)=>{let s=new Date,r=new Date(s.getFullYear(),s.getMonth()-a,1),l=(0,as.GP)(r,"yyyy-MM"),n=(0,as.GP)(r,"MMMM yyyy");return(0,t.jsx)(eb,{value:l,children:n},"month-".concat(l))})})]})]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[i&&n&&n.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("label",{htmlFor:"attendance-user-filter",className:"text-sm font-medium whitespace-nowrap",children:[d("filter_by_employee"),":"]}),(0,t.jsxs)(ep,{value:p,onValueChange:m,children:[(0,t.jsx)(eu,{id:"attendance-user-filter",className:"w-[250px]",children:(0,t.jsx)(em,{placeholder:d("all_employees")})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:d("all_employees")}),n.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName||e.email||d("unknown_user")},e.id))]})]}),"all"!==p&&(0,t.jsx)("button",{onClick:()=>m("all"),className:"text-sm text-muted-foreground hover:text-foreground",children:d("clear_filter")})]}),Q&&(i||1===E.length)&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d("total_present")}),(0,t.jsxs)("p",{className:"text-2xl font-bold flex items-center gap-2",children:[Q.totalPresent,(0,t.jsx)(sF.A,{className:"w-4 h-4 text-green-500"})]})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d("total_absent")}),(0,t.jsxs)("p",{className:"text-2xl font-bold flex items-center gap-2",children:[Q.totalAbsent,(0,t.jsx)(sX.A,{className:"w-4 h-4 text-red-500"})]})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d("late_days")}),(0,t.jsxs)("p",{className:"text-2xl font-bold flex items-center gap-2",children:[Q.totalLate,(0,t.jsx)(A.A,{className:"w-4 h-4 text-yellow-500"})]})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d("total_hours")}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[Math.round(Q.totalHours),"h"]})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:d("avg_attendance")}),(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[Q.avgAttendanceRate,"%"]})]})]}),(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[i&&(0,t.jsx)($,{children:d("employee")}),(0,t.jsx)($,{children:d("working_days")}),(0,t.jsx)($,{children:d("present")}),(0,t.jsx)($,{children:d("absent")}),(0,t.jsx)($,{children:d("late_days")}),(0,t.jsx)($,{children:d("total_hours")}),(0,t.jsx)($,{children:d("attendance_rate")}),(0,t.jsx)($,{children:d("rating")})]})}),(0,t.jsx)(U,{children:0===E.length?(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:i?8:7,className:"text-center text-muted-foreground",children:d("no_attendance_data")})}):E.map(e=>(0,t.jsxs)(G,{children:[i&&(0,t.jsx)(W,{className:"font-medium",children:e.userName}),(0,t.jsx)(W,{children:e.totalDays}),(0,t.jsx)(W,{children:(0,t.jsx)("span",{className:"text-green-600 font-medium",children:e.presentDays})}),(0,t.jsx)(W,{children:(0,t.jsx)("span",{className:"text-red-600 font-medium",children:e.absentDays})}),(0,t.jsx)(W,{children:(0,t.jsx)("span",{className:"text-yellow-600 font-medium",children:e.lateDays})}),(0,t.jsxs)(W,{children:[e.totalHours,"h"]}),(0,t.jsx)(W,{children:(0,t.jsxs)("span",{className:"font-medium",children:[e.attendanceRate,"%"]})}),(0,t.jsx)(W,{children:g(e.attendanceRate)})]},e.userId))})]})})]})]}):(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(sK.A,{className:"w-5 h-5"}),d("attendance_summary")]})}),(0,t.jsx)(j.Wu,{children:(0,t.jsxs)("p",{children:[d("loading"),"..."]})})]})}function s4(e){let{userRole:a}=e,{firestore:s,user:n}=(0,eS.useFirebase)(),{addDoc:d}=eL(),{t:i}=(0,S.o)(),{toast:A}=(0,eJ.dj)(),o=eP(a),[p,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)("all"),[B,h]=(0,r.useState)({userId:"",amount:"",type:"penalty",reason:"",date:(0,as.GP)(new Date,"yyyy-MM-dd")}),E=(0,eS.useMemoFirebase)(()=>s&&n?(0,eR.H9)(s,"users",n.uid):null,[s,n]),{data:g}=(0,eS.useDoc)(E),Q=(null==g?void 0:g.role)==="admin",f=(0,eS.useMemoFirebase)(()=>s&&n?Q?(0,eR.P)((0,eR.rJ)(s,"deductions"),(0,eR.My)("date","desc")):(0,eR.P)((0,eR.rJ)(s,"deductions"),(0,eR._M)("userId","==",n.uid),(0,eR.My)("date","desc")):null,[s,n,Q]),{data:v}=(0,eS.useCollection)(f),N=v||[],I=(0,r.useMemo)(()=>Q&&"all"!==u?N.filter(e=>e.userId===u):N,[N,Q,u]),y=(0,eS.useMemoFirebase)(()=>s&&Q?(0,eR.P)((0,eR.rJ)(s,"chat"),(0,eR.My)("timestamp","desc")):null,[s,Q]),{data:H}=(0,eS.useCollection)(y),_=H||[];(0,r.useEffect)(()=>{if(!Q||!_||0===_.length||!o||0===o.length||!s)return;let e=new Set(I.filter(e=>e.extractedFromChatMessageId).map(e=>e.extractedFromChatMessageId));_.forEach(a=>{var s;if(!a.id||!a.text||!a.userId)return;let t=o.find(e=>e.id===a.userId);if(!t||"admin"!==t.role||e.has(a.id))return;let r=(null==(s=a.text)?void 0:s.toLowerCase())||"";[/\s+(\d+)\s+(?:|\.|)?\s*(?:|)\s+([^\s.]+)/gi,/\s+([^\s\d.]+)\s+(\d+)/gi,/deduct\s+(\d+)\s+(?:egp|pounds)?\s*from\s+([^\s,.]+)/gi,/deduct\s+([^\s\d,.]+)\s+(\d+)/gi,/(?:|penalty)\s+(\d+)\s+(?:|for|on)\s+([^\s.]+)/gi].forEach(e=>{[...r.matchAll(e)].forEach(e=>{let s,t;isNaN(Number(e[1]))?(t=e[1],s=Number(e[2])):(s=Number(e[1]),t=e[2]);let r=o.find(e=>{var a;let s=(null==(a=e.fullName)?void 0:a.toLowerCase())||"",r=t.toLowerCase().trim();return s.includes(r)||s.split(/\s+/).some(e=>e.startsWith(r))});if(r&&s>0)try{d("deductions",{userId:r.id,userName:r.fullName,amount:s,reason:"".concat(i("auto_extracted_from_chat"),': "').concat(a.text.substring(0,100),'"'),type:"penalty",date:a.timestamp||(0,eR.O5)(),extractedFromChatMessageId:a.id,createdBy:a.userId,createdAt:(0,eR.O5)()})}catch(e){console.error("Error creating auto-deduction:",e)}})})})},[_,o,Q,I,s,d,i]);let w=async()=>{if(!s||!n||!B.userId||!B.amount)return void A({variant:"destructive",title:i("error_title"),description:i("please_fill_all_fields")});let e=null==o?void 0:o.find(e=>e.id===B.userId);if(!e)return void A({variant:"destructive",title:i("error_title"),description:"User not found"});try{await d("deductions",{userId:B.userId,userName:e.fullName,amount:parseFloat(B.amount),type:B.type,reason:B.reason,date:eR.Dc.fromDate(new Date(B.date)),createdBy:n.uid,createdAt:(0,eR.O5)()}),A({title:i("deduction_added_title"),description:i("deduction_added_desc")}),m(!1),h({userId:"",amount:"",type:"penalty",reason:"",date:(0,as.GP)(new Date,"yyyy-MM-dd")})}catch(e){console.error("Error adding deduction:",e),A({variant:"destructive",title:i("error_title"),description:i("error_desc")})}},k=e=>{switch(e){case"absence":return(0,t.jsx)(e$.E,{variant:"destructive",children:i("absence")});case"late":return(0,t.jsx)(e$.E,{className:"bg-yellow-500",children:i("late")});case"penalty":return(0,t.jsx)(e$.E,{className:"bg-orange-500",children:i("penalty")});case"other":return(0,t.jsx)(e$.E,{variant:"secondary",children:i("other")})}},C=(0,r.useMemo)(()=>{let e=I.reduce((e,a)=>(e[a.userId]||(e[a.userId]={userName:a.userName,total:0,count:0}),e[a.userId].total+=a.amount,e[a.userId].count+=1,e),{}),a=I.reduce((e,a)=>e+a.amount,0),s=I.filter(e=>e.extractedFromChatMessageId).length;return{totalAmount:a,totalCount:I.length,autoExtracted:s,byUser:Object.entries(e)}},[I]);return(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(ag.A,{className:"w-5 h-5"}),i("deductions_management"),C.autoExtracted>0&&(0,t.jsxs)(e$.E,{variant:"secondary",className:"ml-2",children:[(0,t.jsx)(c.A,{className:"w-3 h-3 mr-1"}),C.autoExtracted," ",i("from_chat")]})]}),Q&&(0,t.jsxs)(l.$,{onClick:()=>m(!0),children:[(0,t.jsx)(b.A,{className:"w-4 h-4 mr-2"}),i("add_deduction")]})]})}),(0,t.jsxs)(j.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:i("total_deductions")}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:C.totalCount})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:i("total_amount")}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[C.totalAmount," ",i("currency")]})]}),(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:i("auto_extracted")}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:C.autoExtracted})]})]}),Q&&o&&o.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(ed.J,{htmlFor:"deduction-user-filter",className:"whitespace-nowrap",children:[i("filter_by_employee"),":"]}),(0,t.jsxs)(ep,{value:u,onValueChange:x,children:[(0,t.jsx)(eu,{id:"deduction-user-filter",className:"w-[250px]",children:(0,t.jsx)(em,{placeholder:i("all_employees")})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"all",children:i("all_employees")}),o.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName||e.email||i("unknown_user")},e.id))]})]}),"all"!==u&&(0,t.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>x("all"),children:i("clear_filter")})]}),Q&&C.byUser.length>0&&"all"===u&&(0,t.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:i("deductions_by_employee")}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:C.byUser.map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"bg-background p-2 rounded text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:s.userName||i("unknown_user")}),(0,t.jsxs)("p",{className:"text-red-600 font-bold",children:[s.total," ",i("currency")," (",s.count," ",i("items"),")"]})]},a)})})]}),Q&&(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg flex items-start gap-3",children:[(0,t.jsx)(sS.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-semibold text-blue-900 dark:text-blue-100",children:i("auto_extraction_enabled")}),(0,t.jsx)("p",{className:"text-blue-700 dark:text-blue-300",children:i("auto_extraction_desc_deductions")})]})]}),(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[Q&&(0,t.jsx)($,{children:i("employee")}),(0,t.jsx)($,{children:i("amount")}),(0,t.jsx)($,{children:i("type")}),(0,t.jsx)($,{children:i("date")}),(0,t.jsx)($,{children:i("reason")}),Q&&(0,t.jsx)($,{children:i("source")})]})}),(0,t.jsx)(U,{children:0===I.length?(0,t.jsx)(G,{children:(0,t.jsx)(W,{colSpan:Q?6:5,className:"text-center text-muted-foreground",children:i("no_deductions_found")})}):I.map(e=>(0,t.jsxs)(G,{children:[Q&&(0,t.jsx)(W,{className:"font-medium",children:e.userName}),(0,t.jsx)(W,{children:(0,t.jsxs)("span",{className:"text-red-600 font-bold",children:[e.amount," ",i("currency")]})}),(0,t.jsx)(W,{children:k(e.type)}),(0,t.jsx)(W,{children:(0,as.GP)(e.date.toDate(),"MMM dd, yyyy")}),(0,t.jsx)(W,{className:"max-w-xs truncate",children:e.reason}),Q&&(0,t.jsx)(W,{children:e.extractedFromChatMessageId?(0,t.jsxs)(e$.E,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(c.A,{className:"w-3 h-3 mr-1"}),i("chat")]}):(0,t.jsx)(e$.E,{variant:"outline",className:"text-xs",children:i("manual")})})]},e.id))})]})})]}),Q&&(0,t.jsx)(eN,{open:p,onOpenChange:m,children:(0,t.jsxs)(e_,{children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:i("add_deduction")}),(0,t.jsx)(eD,{children:i("add_deduction_desc")})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"userId",children:i("employee")}),(0,t.jsxs)(ep,{value:B.userId,onValueChange:e=>h({...B,userId:e}),children:[(0,t.jsx)(eu,{id:"userId",children:(0,t.jsx)(em,{placeholder:i("select_employee")})}),(0,t.jsx)(eh,{children:null==o?void 0:o.map(e=>(0,t.jsx)(eb,{value:e.id,children:e.fullName||"Unknown"},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(ed.J,{htmlFor:"amount",children:[i("amount")," (",i("currency"),")"]}),(0,t.jsx)(eF.p,{id:"amount",type:"number",value:B.amount,onChange:e=>h({...B,amount:e.target.value}),placeholder:"0.00"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"date",children:i("date")}),(0,t.jsx)(eF.p,{id:"date",type:"date",value:B.date,onChange:e=>h({...B,date:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"type",children:i("type")}),(0,t.jsxs)(ep,{value:B.type,onValueChange:e=>h({...B,type:e}),children:[(0,t.jsx)(eu,{id:"type",children:(0,t.jsx)(em,{})}),(0,t.jsxs)(eh,{children:[(0,t.jsx)(eb,{value:"absence",children:i("absence")}),(0,t.jsx)(eb,{value:"late",children:i("late")}),(0,t.jsx)(eb,{value:"penalty",children:i("penalty")}),(0,t.jsx)(eb,{value:"other",children:i("other")})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(ed.J,{htmlFor:"reason",children:i("reason")}),(0,t.jsx)(eM,{id:"reason",value:B.reason,onChange:e=>h({...B,reason:e.target.value}),placeholder:i("deduction_reason_placeholder")})]})]}),(0,t.jsxs)(ek,{children:[(0,t.jsx)(l.$,{variant:"outline",onClick:()=>m(!1),children:i("cancel")}),(0,t.jsx)(l.$,{onClick:w,children:i("add_deduction")})]})]})})]})}function s5(e){let{userRole:a}=e,s="admin"===a,{t:r}=(0,S.o)();return(0,t.jsx)(so,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg",children:(0,t.jsx)(u.A,{className:"w-6 h-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold font-headline",children:r("hr_management")}),(0,t.jsx)("p",{className:"text-muted-foreground",children:r(s?"hr_management_desc_admin":"hr_management_desc_user")})]})]}),(0,t.jsxs)(eW.tU,{defaultValue:"attendance",className:"w-full",children:[(0,t.jsxs)(eW.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(eW.Xi,{value:"attendance",className:"flex items-center gap-2",children:[(0,t.jsx)(sK.A,{className:"w-4 h-4"}),r("attendance_summary")]}),(0,t.jsxs)(eW.Xi,{value:"leaves",className:"flex items-center gap-2",children:[(0,t.jsx)(ar.A,{className:"w-4 h-4"}),r("leaves")]}),(0,t.jsxs)(eW.Xi,{value:"deductions",className:"flex items-center gap-2",children:[(0,t.jsx)(ag.A,{className:"w-4 h-4"}),r("deductions")]})]}),(0,t.jsx)(eW.av,{value:"attendance",className:"mt-6",children:(0,t.jsx)(s1,{userRole:a})}),(0,t.jsx)(eW.av,{value:"leaves",className:"mt-6",children:(0,t.jsx)(sY,{userRole:a})}),(0,t.jsx)(eW.av,{value:"deductions",className:"mt-6",children:(0,t.jsx)(s4,{userRole:a})})]}),s&&(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 p-6 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(sK.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,t.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:r("attendance_summary")})]}),(0,t.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:r("attendance_summary_desc")})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 p-6 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(ar.A,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,t.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-100",children:r("leave_management")})]}),(0,t.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:r("leave_management_desc")})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950 dark:to-orange-900 p-6 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(ag.A,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),(0,t.jsx)("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:r("deductions")})]}),(0,t.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:r("deductions_desc")})]})]})]})})}var s3=s(59119);function s6(e){let{users:a}=e,{t:s}=(0,S.o)(),{updateDoc:n}=eL(),[d,i]=(0,r.useState)(a.reduce((e,a)=>({...e,[a.id]:a.hourlyRate||""}),{})),c=(e,a)=>{i(s=>({...s,[e]:a}))},A=e=>{let a=parseFloat(d[e]);isNaN(a)||n("users",e,{hourlyRate:a})};return(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(u.A,{}),s("team_management")]})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:s("employee_name")}),(0,t.jsx)($,{children:s("email")}),(0,t.jsx)($,{children:s("role")}),(0,t.jsx)($,{children:s("hourly_rate")}),(0,t.jsx)($,{className:"text-right",children:s("actions")})]})}),(0,t.jsx)(U,{children:a.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:e.fullName}),(0,t.jsx)(W,{children:e.email}),(0,t.jsx)(W,{children:e.role}),(0,t.jsx)(W,{children:(0,t.jsx)(eF.p,{type:"number",value:d[e.id],onChange:a=>c(e.id,a.target.value),className:"w-24",placeholder:s("not_set")})}),(0,t.jsx)(W,{className:"text-right",children:(0,t.jsxs)(l.$,{size:"sm",onClick:()=>A(e.id),children:[(0,t.jsx)(s3.A,{className:"h-4 w-4 mr-2"}),s("save")]})})]},e.id))})]})})})]})}let s8=(0,K.createServerReference)("409573205257d8978ffb9f40f7e182b76af501512b",K.callServer,void 0,K.findSourceMapURL,"generateSalaryInsight");function s7(e){let{users:a,tasks:s}=e,{t:n}=(0,S.o)(),{firestore:d}=(0,eS.useFirebase)(),[i,c]=(0,r.useState)(null),[A,o]=(0,r.useState)(null),[p,m]=(0,r.useState)({}),[u,x]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=new Date;c(e.getMonth()),o(e.getFullYear())},[]);let h=(0,r.useMemo)(()=>{if(null===A||null===i){let e=new Date;return{start:(0,ad.w)(e),end:(0,ai.p)(e)}}let e=new Date(A,i,1);return{start:(0,ad.w)(e),end:(0,ai.p)(e)}},[i,A]),b=(0,eS.useMemoFirebase)(()=>d&&null!==A&&null!==i?(0,eR.P)((0,eR.rJ)(d,"attendance"),(0,eR._M)("clockIn",">=",h.start),(0,eR._M)("clockIn","<=",h.end)):null,[d,h,A,i]),{data:E}=(0,eS.useCollection)(b),g=(0,eS.useMemoFirebase)(()=>d&&null!==A&&null!==i?(0,eR.P)((0,eR.rJ)(d,"deductions"),(0,eR._M)("date",">=",h.start),(0,eR._M)("date","<=",h.end)):null,[d,h,A,i]),{data:Q}=(0,eS.useCollection)(g),f=(0,r.useMemo)(()=>null===A||null===i?[]:a.map(e=>{let a=((null==E?void 0:E.filter(a=>a.userId===e.id))||[]).reduce((e,a)=>{if(a.clockIn&&a.clockOut){let s=a.clockIn.toDate();return e+(a.clockOut.toDate().getTime()-s.getTime())/36e5}return e},0),t=((null==Q?void 0:Q.filter(a=>a.userId===e.id))||[]).reduce((e,a)=>e+a.amount,0),r=e.hourlyRate||0,l=a*r,n=l-t,d=s.filter(a=>a.assigned_to.includes(e.id)&&"done"===a.status&&a.updatedAt&&a.updatedAt.toDate()>=h.start&&a.updatedAt.toDate()<=h.end).length;return{userId:e.id,userName:e.fullName,hourlyRate:r,totalHours:parseFloat(a.toFixed(2)),grossSalary:parseFloat(l.toFixed(2)),totalDeductions:parseFloat(t.toFixed(2)),netSalary:parseFloat(n.toFixed(2)),completedTasks:d}}),[a,E,Q,s,h,A,i]),v=async e=>{let a=f.find(a=>a.userId===e);if(!a)return;x(a=>({...a,[e]:!0})),m(a=>({...a,[e]:null}));let s={userName:a.userName,hourlyRate:a.hourlyRate,totalHours:a.totalHours,netSalary:a.netSalary,completedTasks:a.completedTasks,totalDeductions:a.totalDeductions};try{let a=await s8(s);m(s=>({...s,[e]:a.insight||n("no_insight_generated")}))}catch(a){console.error(a),m(a=>({...a,[e]:n("failed_to_generate_insights")}))}finally{x(a=>({...a,[e]:!1}))}},N=Array.from({length:12},(e,a)=>new Date(0,a).toLocaleString("default",{month:"long"})),I=Array.from({length:5},(e,a)=>new Date().getFullYear()-a);return null===i||null===A?(0,t.jsx)(j.Zp,{children:(0,t.jsx)(j.aR,{children:(0,t.jsxs)(j.ZB,{children:[n("loading"),"..."]})})}):(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)(j.ZB,{className:"font-headline flex items-center gap-2",children:[(0,t.jsx)(B.A,{}),n("salary_report")]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,t.jsxs)(ep,{value:i.toString(),onValueChange:e=>c(parseInt(e)),children:[(0,t.jsx)(eu,{className:"w-full sm:w-[180px]",children:(0,t.jsx)(em,{})}),(0,t.jsx)(eh,{children:N.map((e,a)=>(0,t.jsx)(eb,{value:a.toString(),children:e},a))})]}),(0,t.jsxs)(ep,{value:A.toString(),onValueChange:e=>o(parseInt(e)),children:[(0,t.jsx)(eu,{className:"w-full sm:w-[120px]",children:(0,t.jsx)(em,{})}),(0,t.jsx)(eh,{children:I.map(e=>(0,t.jsx)(eb,{value:e.toString(),children:e},e))})]})]})]})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P,{children:[(0,t.jsx)(O,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)($,{children:n("employee_name")}),(0,t.jsx)($,{children:n("hourly_rate")}),(0,t.jsx)($,{children:n("total_hours")}),(0,t.jsx)($,{children:n("gross_salary")}),(0,t.jsx)($,{children:n("deductions")}),(0,t.jsx)($,{children:n("net_salary")}),(0,t.jsx)($,{children:n("completed_tasks_month")}),(0,t.jsx)($,{className:"text-right",children:n("performance_insight")})]})}),(0,t.jsx)(U,{children:f.map(e=>(0,t.jsxs)(G,{children:[(0,t.jsx)(W,{className:"font-medium",children:e.userName}),(0,t.jsxs)(W,{children:[e.hourlyRate," ",n("currency")]}),(0,t.jsx)(W,{children:e.totalHours}),(0,t.jsxs)(W,{children:[e.grossSalary," ",n("currency")]}),(0,t.jsxs)(W,{className:"text-red-500",children:[e.totalDeductions," ",n("currency")]}),(0,t.jsxs)(W,{className:"font-semibold",children:[e.netSalary," ",n("currency")]}),(0,t.jsx)(W,{children:e.completedTasks}),(0,t.jsx)(W,{className:"text-right",children:p[e.userId]?(0,t.jsx)("p",{className:"text-xs text-left",children:p[e.userId]}):(0,t.jsxs)(l.$,{size:"sm",variant:"outline",onClick:()=>v(e.userId),disabled:u[e.userId],children:[u[e.userId]?(0,t.jsx)(q.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(V.A,{className:"h-4 w-4 mr-2"}),n("analyze")]})})]},e.userId))})]})})})]})}function s9(e){let{tasks:a,userRole:s}=e,[E,g]=(0,r.useState)(!1),[Q,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[I,y]=(0,r.useState)(void 0),{auth:H}=(0,eS.useFirebase)(),{t:_}=(0,S.o)(),w=eP(s),k=sc(),[C,D]=(0,r.useState)("dashboard"),F=(0,r.useMemo)(()=>{let e=e=>{if(!e)return"Unassigned";if(!w)return e;let a=null==w?void 0:w.find(a=>a.id===e);return a?"".concat(a.fullName):e},s=new Map;return null==w||w.forEach(a=>{s.set(a.id,{name:e(a.id),total:0,backlog:0,in_progress:0,review:0,done:0})}),a.forEach(a=>{if(a.assigned_to&&a.assigned_to.length>0)a.assigned_to.forEach(t=>{s.has(t)||s.set(t,{name:e(t),total:0,backlog:0,in_progress:0,review:0,done:0});let r=s.get(t);r.total++,r[a.status]++});else{s.has("unassigned")||s.set("unassigned",{name:e(void 0),total:0,backlog:0,in_progress:0,review:0,done:0});let t=s.get("unassigned");t.total++,t[a.status]++}}),Array.from(s.values()).sort((e,a)=>a.total-e.total)},[a,w]),M=async()=>{H&&await (0,e6.CI)(H)},J=e=>{N(!1),y(e),g(!0)},Z="admin"===s;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sC,{onAction:(e,a)=>{switch(e){case"new-task":N(!0);break;case"new-client":f(!0);break;case"navigate":D(a)}}}),(0,t.jsx)(e3,{isOpen:E,onOpenChange:g,initialData:I}),(0,t.jsx)(si,{isOpen:Q,onOpenChange:f}),(0,t.jsx)(eN,{open:v,onOpenChange:N,children:(0,t.jsxs)(e_,{className:"max-w-4xl",children:[(0,t.jsxs)(ew,{children:[(0,t.jsx)(eC,{children:_("create_new_task")}),(0,t.jsx)(eD,{children:_("select_template_or_start_fresh")})]}),(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(sO,{templates:[],onSelectTemplate:e=>{var a;J({...e.defaultFields,checklist:null==(a=e.defaultChecklist)?void 0:a.map(e=>({...e,id:crypto.randomUUID(),createdAt:new Date})),title:e.name,description:e.description})}})}),(0,t.jsx)(ek,{children:(0,t.jsxs)(l.$,{variant:"outline",onClick:()=>J(),children:[(0,t.jsx)(n.A,{className:"mr-2"}),_("start_from_scratch")]})})]})}),(0,t.jsxs)(a1,{children:[(0,t.jsxs)(a4,{children:[(0,t.jsx)(a6,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a5,{}),(0,t.jsx)("h2",{className:"font-semibold text-lg font-headline group-data-[collapsible=icon]:hidden",children:"Xfuse Sites"})]})}),(0,t.jsx)(a9,{children:(0,t.jsxs)(se,{children:[(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"dashboard"===C,onClick:()=>D("dashboard"),children:[(0,t.jsx)(d.A,{}),(0,t.jsx)("span",{children:_("my_dashboard")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"my-tasks"===C,onClick:()=>D("my-tasks"),children:[(0,t.jsx)(i.A,{}),(0,t.jsx)("span",{children:_("my_tasks")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"chat"===C,onClick:()=>D("chat"),children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("span",{children:_("chat")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"attendance"===C,onClick:()=>D("attendance"),children:[(0,t.jsx)(A.A,{}),(0,t.jsx)("span",{children:_("attendance")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"courses"===C,onClick:()=>D("courses"),children:[(0,t.jsx)(o.A,{}),(0,t.jsx)("span",{children:_("courses")})]})}),Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"reports"===C,onClick:()=>D("reports"),children:[(0,t.jsx)(p.A,{}),(0,t.jsx)("span",{children:_("reports")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"clients"===C,onClick:()=>D("clients"),children:[(0,t.jsx)(m.A,{}),(0,t.jsx)("span",{children:_("clients")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"team"===C,onClick:()=>D("team"),children:[(0,t.jsx)(u.A,{}),(0,t.jsx)("span",{children:_("team")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"hr"===C,onClick:()=>D("hr"),children:[(0,t.jsx)(x.A,{}),(0,t.jsx)("span",{children:_("hr_management")})]})}),(0,t.jsx)(sa,{children:(0,t.jsxs)(st,{isActive:"salary"===C,onClick:()=>D("salary"),children:[(0,t.jsx)(B.A,{}),(0,t.jsx)("span",{children:_("salary_report")})]})})]})]})}),(0,t.jsxs)(a8,{children:[(0,t.jsx)(a7,{}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(aZ,{}),(0,t.jsx)(aM,{}),(0,t.jsx)(l.$,{variant:"outline",size:"icon",onClick:M,children:(0,t.jsx)(h.A,{})})]})]})]}),(0,t.jsx)(a3,{children:(0,t.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a5,{className:"md:hidden"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-semibold text-2xl font-headline",children:["dashboard"===C&&_("team_analytics"),"my-tasks"===C&&_("my_tasks"),"attendance"===C&&_("attendance"),"courses"===C&&_("my_courses"),"reports"===C&&_("reports"),"clients"===C&&_("clients"),"chat"===C&&_("team_chat"),"hr"===C&&_("hr_management"),"team"===C&&_("team_management"),"salary"===C&&_("salary_report")]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:Z?_("home_page_description"):_("welcome_back_desc")})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:Z&&(0,t.jsxs)(l.$,{onClick:()=>N(!0),className:"w-full sm:w-auto",children:[(0,t.jsx)(b.A,{})," ",_("add_task")]})})]}),(()=>{switch(C){case"my-tasks":return(0,t.jsx)(ay,{tasks:a});case"reports":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("tasks_by_member")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(R,{data:F})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("tasks_completion_ratio")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(L,{data:F})})]})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("detailed_member_breakdown")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(T,{data:F})})]}),Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sM,{tasks:a,users:(null==w?void 0:w.map(e=>({id:e.id,name:e.fullName||"Unknown"})))||[]}),(0,t.jsx)(sJ,{tasks:a,clients:k||[]})]})]});case"clients":return(0,t.jsx)(sQ,{});case"attendance":return Z?(0,t.jsx)(aA,{}):(0,t.jsx)(at,{});case"courses":return(0,t.jsx)(am,{userRole:s});case"chat":return(0,t.jsx)(sV,{});case"hr":return(0,t.jsx)(s5,{userRole:s});case"team":return(0,t.jsx)(s6,{users:w});case"salary":return(0,t.jsx)(s7,{users:w,tasks:a});default:return(0,t.jsxs)(t.Fragment,{children:[Z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eQ,{byUser:F}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("tasks_by_member")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(R,{data:F})})]}),(0,t.jsxs)(j.Zp,{children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("tasks_completion_ratio")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(L,{data:F})})]})]}),(0,t.jsxs)(j.Zp,{className:"mt-6",children:[(0,t.jsx)(j.aR,{children:(0,t.jsx)(j.ZB,{className:"font-headline",children:_("detailed_member_breakdown")})}),(0,t.jsx)(j.Wu,{children:(0,t.jsx)(T,{data:F})})]})]}),!Z&&(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,t.jsx)("h2",{className:"font-semibold text-2xl font-headline",children:_("welcome_back")}),(0,t.jsx)(at,{}),(0,t.jsx)(am,{userRole:s})]})]})}})()]})})]})]})}},24944:(e,a,s)=>{"use strict";s.d(a,{k:()=>d});var t=s(95155),r=s(12115),l=s(55863),n=s(59434);let d=r.forwardRef((e,a)=>{let{className:s,value:r,...d}=e;return(0,t.jsx)(l.bL,{ref:a,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...d,children:(0,t.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});d.displayName=l.bL.displayName},26126:(e,a,s)=>{"use strict";s.d(a,{E:()=>d});var t=s(95155);s(12115);var r=s(74466),l=s(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:s}),a),...r})}},32383:()=>{},83686:()=>{}}]);