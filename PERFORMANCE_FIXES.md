# ๐ง ุฅุตูุงุญุงุช ุงูุฃุฏุงุก ูุญู ูุดุงูู ุงููุงุด

## ุงููุดุงูู ุงูุชู ุชู ุญููุง โ

### 1. ุชุฌููุฏ ุงููููุน ุนูุฏ ุชุบููุฑ ุงูุตูุงุญูุงุช
**ุงูุณุจุจ:** ูุงู ูุชู ุฅูุบุงุก **ุฌููุน** ุงูุงุณุชุนูุงูุงุช ูู ุงูุชุทุจูู
**ุงูุญู:** ุงูุขู ูุชู ุฅูุบุงุก ุงูุงุณุชุนูุงูุงุช ุงููุชุนููุฉ ุจุงููุณุชุฎุฏู ููุท

### 2. ุงูุญุงุฌุฉ ููุณุญ ุงููุงุด ุงููุณุชูุฑ
**ุงูุณุจุจ:** ุฅุนุฏุงุฏุงุช React Query ูุงูุช ุชุณุจุจ ุฅุนุงุฏุฉ ุชุญููู ููุฑุทุฉ
**ุงูุญู:** ุฒูุงุฏุฉ `staleTime` ู `gcTime` ูุฅุถุงูุฉ `networkMode: 'offlineFirst'`

### 3. ุงูุจุทุก ุนูุฏ ุงูุชููู ุจูู ุงูุตูุญุงุช
**ุงูุณุจุจ:** ุนุฏู ูุฌูุฏ debouncing ูุชุณุฑูุจุงุช ุงูุฐุงูุฑุฉ ูู ุงูุงุดุชุฑุงูุงุช
**ุงูุญู:** ุฅุถุงูุฉ debouncing (500ms) ูุชุญุณูู cleanup ูููููุงุช

## ุงูุชุบููุฑุงุช ุงูููููุฐุฉ

### ๐ `supabase-context.tsx`
```typescript
// โ ูุจู: ูููุบู ุฌููุน ุงูุงุณุชุนูุงูุงุช
queryClient.invalidateQueries();

// โ ุจุนุฏ: ูููุบู ุงุณุชุนูุงูุงุช ูุญุฏุฏุฉ ููุท
queryClient.invalidateQueries({ 
    predicate: (query) => {
        const key = query.queryKey[0] as string;
        return key === 'profiles' || key === 'users' || 
               key === 'tasks' || key === 'departments' ||
               key === 'attendance' || key === 'leaves';
    }
});
```

**ุงูุชุญุณููุงุช:**
- โ ุฅุถุงูุฉ debouncing (500ms) ูุชุญุฏูุซุงุช ุงูู role
- โ ูุญุต `newRole !== state.role` ูููุน ุงูุชุญุฏูุซุงุช ุงูููุฑุฑุฉ
- โ ุฅุถุงูุฉ `state.role` ููู dependencies
- โ ุชูุธูู debounceTimer ุนูุฏ unmount

### ๐ `providers.tsx`
```typescript
queries: {
    staleTime: 10 * 60 * 1000, // ูุงู 5 ุฏูุงุฆู โ ุงูุขู 10 ุฏูุงุฆู
    gcTime: 15 * 60 * 1000,     // ูุงู 10 ุฏูุงุฆู โ ุงูุขู 15 ุฏูููุฉ
    networkMode: 'offlineFirst', // ุฌุฏูุฏ: ุงุณุชุฎุฏุงู ุงููุงุด ุฃููุงู
}
```

### ๐ `use-optimized-query.ts`
```typescript
// โ ุฅุถุงูุฉ isMounted flag
// โ ุชุญุณูู channel cleanup: unsubscribe() ุซู removeChannel()
// โ ุฅุถุงูุฉ timestamp ููู channel name ูููุน ุงูุชุถุงุฑุจ
```

### ๐ `use-supabase-data.ts`
```typescript
// โ ุชุญุณูู ุชุฑุชูุจ cleanup: unsubscribe ูุจู removeChannel
```

## ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุชุบููุฑ ุงูุตูุงุญูุงุช
1. ุงูุชุญ `Developer Tools` โ `Console`
2. ุณุฌู ุงูุฏุฎูู ููุณุคูู
3. ุงูุชุญ ุตูุญุฉ ุงููุณุชุฎุฏููู
4. ุบููุฑ role ูุฃู ูุณุชุฎุฏู
5. **ุงููุชููุน:** ุฑุณุงูุฉ `๐ Invalidating user-specific queries` ูู Console
6. **ุงููุชููุน:** ุนุฏู ุชุฌููุฏ ุงููููุน

### 2. ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
1. ุงูุชุญ `Developer Tools` โ `Performance`
2. ุงุจุฏุฃ ุงูุชุณุฌูู
3. ุชููู ุจูู ุนุฏุฉ ุตูุญุงุช
4. ุฃููู ุงูุชุณุฌูู
5. **ุงููุชููุน:** ุนุฏู ูุฌูุฏ long tasks ุฃู infinite loops

### 3. ุงุฎุชุจุงุฑ ุงูุฐุงูุฑุฉ
1. ุงูุชุญ `Developer Tools` โ `Memory`
2. ุฎุฐ Heap Snapshot
3. ุชุตูุญ ุงูุชุทุจูู ููุฏุฉ 5 ุฏูุงุฆู
4. ุฎุฐ Heap Snapshot ุขุฎุฑ
5. **ุงููุชููุน:** ุนุฏู ุฒูุงุฏุฉ ูุจูุฑุฉ ูู ุงูุฐุงูุฑุฉ

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ

โ **ูู ุชุญุชุงุฌ ููุณุญ ุงููุงุด ุจุนุฏ ุงูุขู**
โ **ุชุบููุฑ ุงูุตูุงุญูุงุช ูุชู ุจุณูุงุณุฉ ุฏูู ุชุฌููุฏ**
โ **ุชุญุณูู ุณุฑุนุฉ ุงูุชููู ุจูู ุงูุตูุญุงุช**
โ **ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ**

## ููุงุญุธุงุช

- ุงูุชุญุณููุงุช ุชูุฑูุฒ ุนูู **ุงูุงุณุชุนูุงูุงุช ุงูุญุณุงุณุฉ ููุตูุงุญูุงุช ููุท**
- ุงูู debouncing ูููุน ุงูุชุญุฏูุซุงุช ุงูุณุฑูุนุฉ ุงููุชูุฑุฑุฉ
- ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ ุชูุงุฒู ุจูู **ุงูุฃุฏุงุก** ู **ุญุฏุงุซุฉ ุงูุจูุงูุงุช**
