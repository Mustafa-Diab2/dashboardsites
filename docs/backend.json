{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user, same as the Firebase Auth UID."
        },
        "fullName": {
          "type": "string",
          "description": "The full name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email of the user."
        },
        "role": {
          "type": "string",
          "enum": ["admin", "backend", "frontend", "trainee"],
          "description": "The role of the user."
        },
        "hourlyRate": {
          "type": "number",
          "description": "The user's hourly rate for salary calculation."
        },
        "joined_at": {
          "type": "string",
          "description": "Timestamp indicating when the user was created.",
          "format": "date-time"
        }
      },
      "required": ["id", "fullName", "email", "role", "joined_at"]
    },
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a task within the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the task."
        },
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the task."
        },
        "type": {
          "type": "string",
          "enum": ["work", "training"],
          "description": "The type of the task."
        },
        "assigned_to": {
          "type": "array",
          "description": "An array of user IDs assigned to the task.",
          "items": {
            "type": "string"
          }
        },
        "created_by": {
          "type": "string",
          "description": "The ID of the user who created the task."
        },
        "client_id": {
          "type": "string",
          "description": "The ID of the client associated with this task."
        },
        "progress": {
          "type": "number",
          "description": "The completion progress of the task, from 0 to 100."
        },
        "status": {
          "type": "string",
          "enum": ["backlog", "in_progress", "review", "done"],
          "description": "The current status of the task."
        },
        "priority": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "The priority of the task."
        },
        "start_date": {
          "type": "string",
          "description": "The start date of the task.",
          "format": "date"
        },
        "due_date": {
          "type": "string",
          "description": "The due date of the task.",
          "format": "date"
        },
        "deliverable_location": {
          "type": "string",
          "description": "A link or address for the deliverable."
        },
        "delivery_method": {
          "type": "string",
          "enum": ["in_person", "upload", "link"],
          "description": "The method of delivery for the task."
        },
        "deliverable_details": {
          "type": "string",
          "description": "Specific details about the deliverable."
        },
        "client_payment": {
          "type": "number",
          "description": "The payment amount received from the client for this task."
        },
        "backend_share_pct": {
          "type": "number",
          "description": "Percentage share for the backend team (0-100)."
        },
        "frontend_share_pct": {
          "type": "number",
          "description": "Percentage share for the frontend team (0-100)."
        },
        "payment_schedule": {
          "type": "string",
          "description": "Details on when payment will be received."
        },
        "backend_conditions": {
          "type": "string",
          "description": "Specific requirements and conditions for backend development."
        },
        "frontend_conditions": {
          "type": "string",
          "description": "Specific requirements and conditions for frontend development."
        },
        "ux_requirements": {
            "type": "string",
            "description": "Notes on colors, user experience, and other UI/UX feedback."
        },
        "market_research_link": {
          "type": "string",
          "format": "uri",
          "description": "A link to related market research."
        },
        "checklist": {
            "type": "array",
            "items": {
                "$ref": "#/entities/ChecklistItem"
            }
        },
        "blocked_by": {
            "type": "array",
            "items": { "type": "string" }
        },
        "blocks": {
            "type": "array",
            "items": { "type": "string" }
        },
        "approvals": {
            "type": "array",
            "items": {
                "$ref": "#/entities/Approval"
            }
        },
        "research": {
            "type": "array",
            "items": {
                "$ref": "#/entities/ResearchItem"
            }
        },
        "created_at": {
          "type": "string",
          "description": "Timestamp indicating when the task was created.",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "description": "Timestamp indicating when the task was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "title",
        "type",
        "status",
        "priority",
        "created_by",
        "created_at",
        "updated_at"
      ]
    },
    "Client": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Client",
      "type": "object",
      "description": "Represents a client.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the client."
        },
        "name": {
          "type": "string",
          "description": "The name of the client."
        },
        "project_name": {
          "type": "string",
          "description": "The name of the project associated with the client."
        },
        "total_payment": {
          "type": "number",
          "description": "The total payment agreed upon for the project."
        },
        "paid_amount": {
          "type": "number",
          "description": "The amount already paid by the client."
        },
        "contact_info": {
          "type": "string",
          "description": "Contact information for the client (e.g., email, phone, address)."
        },
        "notes": {
          "type": "string",
          "description": "General notes about the client or project."
        }
      },
      "required": ["id", "name", "project_name"]
    },
    "File": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "File",
      "type": "object",
      "description": "Represents a file uploaded for a task.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the file."
        },
        "taskId": {
          "type": "string",
          "description": "The ID of the task this file is associated with."
        },
        "name": {
          "type": "string",
          "description": "The name of the file."
        },
        "size": {
          "type": "number",
          "description": "The size of the file in bytes."
        },
        "contentType": {
          "type": "string",
          "description": "The MIME type of the file."
        },
        "url": {
          "type": "string",
          "description": "The URL of the file stored in Firebase Storage.",
          "format": "uri"
        },
        "uploadedBy": {
          "type": "string",
          "description": "The UID of the user who uploaded the file."
        },
        "uploadedAt": {
          "type": "string",
          "description": "Timestamp indicating when the file was uploaded.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "taskId",
        "name",
        "size",
        "contentType",
        "url",
        "uploadedBy",
        "uploadedAt"
      ]
    },
    "Attendance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Attendance",
      "type": "object",
      "description": "Represents a single attendance record for a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user."
        },
        "clockIn": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user clocked in."
        },
        "clockOut": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user clocked out."
        }
      },
      "required": ["userId", "clockIn"]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course assigned to a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user this course is assigned to."
        },
        "name": {
          "type": "string",
          "description": "The name of the course."
        },
        "link": {
          "type": "string",
          "format": "uri",
          "description": "A URL to the course material."
        },
        "duration": {
          "type": "string",
          "description": "The expected duration of the course (e.g., '2 hours', '3 weeks')."
        },
        "status": {
          "type": "string",
          "enum": ["not_started", "in_progress", "completed"],
          "description": "The current status of the course."
        },
        "startedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the course was started."
        },
        "completedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the course was completed."
        }
      },
      "required": ["userId", "name", "link", "duration", "status"]
    },
    "ChatMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChatMessage",
      "type": "object",
      "description": "Represents a single message in the team chat.",
      "properties": {
        "id": { "type": "string" },
        "userId": {
          "type": "string",
          "description": "The ID of the user who sent the message."
        },
        "userName": {
          "type": "string",
          "description": "The display name of the user who sent the message."
        },
        "text": {
          "type": "string",
          "description": "The content of the chat message."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the message was sent."
        }
      },
      "required": ["id", "userId", "userName", "text", "timestamp"]
    },
    "Leave": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Leave",
      "type": "object",
      "description": "Represents a leave request from an employee.",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "userName": { "type": "string" },
        "type": { "type": "string", "enum": ["sick", "annual", "unpaid", "emergency", "other"] },
        "startDate": { "type": "string", "format": "date-time" },
        "endDate": { "type": "string", "format": "date-time" },
        "days": { "type": "number" },
        "reason": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "approved", "rejected"] },
        "approvedBy": { "type": "string" },
        "approvedAt": { "type": "string", "format": "date-time" },
        "createdAt": { "type": "string", "format": "date-time"},
        "extractedFromChatMessageId": { "type": "string"}
      },
      "required": ["id", "userId", "userName", "type", "startDate", "endDate", "days", "status", "createdAt"]
    },
    "Deduction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Deduction",
      "type": "object",
      "description": "Represents a salary deduction for an employee.",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "userName": { "type": "string" },
        "amount": { "type": "number" },
        "reason": { "type": "string" },
        "type": { "type": "string", "enum": ["absence", "late", "penalty", "other"] },
        "date": { "type": "string", "format": "date-time" },
        "createdBy": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "extractedFromChatMessageId": { "type": "string"}
      },
      "required": ["id", "userId", "amount", "reason", "type", "date", "createdBy", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores user information, including role and creation timestamp."
        }
      },
      {
        "path": "/tasks/{taskId}",
        "definition": {
          "entityName": "Task",
          "schema": { "$ref": "#/entities/Task" },
          "description": "Stores detailed information about a task."
        }
      },
      {
        "path": "/clients/{clientId}",
        "definition": {
          "entityName": "Client",
          "schema": { "$ref": "#/entities/Client" },
          "description": "Stores client information and their associated projects."
        }
      },
      {
        "path": "/tasks/{taskId}/files/{fileId}",
        "definition": {
          "entityName": "File",
          "schema": { "$ref": "#/entities/File" },
          "description": "Stores file metadata associated with a specific task."
        }
      },
      {
        "path": "/attendance/{attendanceId}",
        "definition": {
          "entityName": "Attendance",
          "schema": { "$ref": "#/entities/Attendance" },
          "description": "Stores attendance records for users."
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": { "$ref": "#/entities/Course" },
          "description": "Stores courses assigned to users."
        }
      },
      {
        "path": "/chat/{messageId}",
        "definition": {
          "entityName": "ChatMessage",
          "schema": { "$ref": "#/entities/ChatMessage" },
          "description": "Stores team chat messages."
        }
      },
      {
        "path": "/leaves/{leaveId}",
        "definition": {
          "entityName": "Leave",
          "schema": { "$ref": "#/entities/Leave" },
          "description": "Stores employee leave requests."
        }
      },
      {
        "path": "/deductions/{deductionId}",
        "definition": {
          "entityName": "Deduction",
          "schema": { "$ref": "#/entities/Deduction" },
          "description": "Stores employee salary deductions."
        }
      }
    ]
  }
}

    